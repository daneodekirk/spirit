function MediumEditor(a,b){"use strict";return this.init(a,b)}!function(a){function b(){}jQuery.event.props.push("dataTransfer");var c={fallback_id:"",url:"",refresh:1e3,paramname:"userfile",requestType:"POST",allowedfileextensions:[],allowedfiletypes:[],maxfiles:25,maxfilesize:1,queuefiles:0,queuewait:200,data:{},headers:{},drop:b,dragStart:b,dragEnter:b,dragOver:b,dragLeave:b,docEnter:b,docOver:b,docLeave:b,beforeEach:b,afterAll:b,rename:b,error:function(a){alert(a)},uploadStarted:b,uploadFinished:b,progressUpdated:b,globalProgressUpdated:b,speedUpdated:b},d=["BrowserNotSupported","TooManyFiles","FileTooLarge","FileTypeNotAllowed","NotFound","NotReadable","AbortError","ReadError","FileExtensionNotAllowed"];a.fn.filedrop=function(b){function e(a){if(w.drop.call(this,a)===!1)return!1;if(a.dataTransfer)return v=a.dataTransfer.files,null===v||void 0===v||0===v.length?(w.error(d[0]),!1):(z=v.length,i(),a.preventDefault(),!1)}function f(b,c,d,e){var f="--",g="\r\n",h="",i=w.paramname;if(w.data){var j=a.param(w.data).replace(/\+/g,"%20").split(/&/);a.each(j,function(){var a=this.split("=",2),b=decodeURIComponent(a[0]),c=decodeURIComponent(a[1]);2===a.length&&(h+=f,h+=e,h+=g,h+='Content-Disposition: form-data; name="'+b+'"',h+=g,h+=g,h+=c,h+=g)})}return jQuery.isFunction(i)&&(i=i(b)),h+=f,h+=e,h+=g,h+='Content-Disposition: form-data; name="'+(i||"")+'"',h+='; filename="'+b+'"',h+=g,h+="Content-Type: "+d,h+=g,h+=g,h+=c,h+=g,h+=f,h+=e,h+=f,h+=g}function g(a){if(a.lengthComputable){var b=Math.round(100*a.loaded/a.total);if(this.currentProgress!==b){this.currentProgress=b,w.progressUpdated(this.index,this.file,this.currentProgress),x[this.global_progress_index]=this.currentProgress,h();var c=(new Date).getTime(),d=c-this.currentStart;if(d>=w.refresh){var e=a.loaded-this.startData,f=e/d;w.speedUpdated(this.index,this.file,f),this.startData=a.loaded,this.currentStart=c}}}}function h(){if(0!==x.length){var a,b=0;for(a in x)x.hasOwnProperty(a)&&(b+=x[a]);w.globalProgressUpdated(Math.round(b/x.length))}}function i(){if(y=!1,!v)return w.error(d[0]),!1;if(w.allowedfiletypes.push&&w.allowedfiletypes.length)for(var b=v.length;b--;)if(!v[b].type||a.inArray(v[b].type,w.allowedfiletypes)<0)return w.error(d[3],v[b]),!1;if(w.allowedfileextensions.push&&w.allowedfileextensions.length)for(var b=v.length;b--;){var c=!1;for(q=0;q<w.allowedfileextensions.length;q++)v[b].name.substr(v[b].name.length-w.allowedfileextensions[q].length)==w.allowedfileextensions[q]&&(c=!0);if(!c)return w.error(d[8],v[b]),!1}var e=0,i=0;if(z>w.maxfiles&&0===w.queuefiles)return w.error(d[1]),!1;for(var n=[],o=[],p=[],q=0;z>q;q++)n.push(q);var r=function(a){setTimeout(s,a)},s=function(){var a;if(y)return!1;if(w.queuefiles>0&&o.length>=w.queuefiles)return r(w.queuewait);a=n[0],n.splice(0,1),o.push(a);try{if(l(v[a])!==!1){if(a===z)return;var b=new FileReader,c=1048576*w.maxfilesize;if(b.index=a,v[a].size>c)return w.error(d[2],v[a],a),o.forEach(function(b,c){b===a&&o.splice(c,1)}),i++,!0;b.onerror=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:return w.error(d[4]),!1;case a.target.error.NOT_READABLE_ERR:return w.error(d[5]),!1;case a.target.error.ABORT_ERR:return w.error(d[6]),!1;default:return w.error(d[7]),!1}},b.onloadend=w.beforeSend?function(b){w.beforeSend(v[a],a,function(){t(b)})}:t,b.readAsDataURL(v[a])}else i++}catch(e){return o.forEach(function(b,c){b===a&&o.splice(c,1)}),w.error(d[0]),!1}n.length>0&&s()},t=function(b){var c=(b.srcElement||b.target).index;void 0===b.target.index&&(b.target.index=j(b.total));var d,l=new XMLHttpRequest,n=l.upload,q=v[b.target.index],r=b.target.index,s=(new Date).getTime(),t="------multipartformboundary"+(new Date).getTime(),u=x.length,A=k(q.name),B=q.type;w.withCredentials&&(l.withCredentials=w.withCredentials);var C=atob(b.target.result.split(",")[1]);d="string"==typeof A?f(A,C,B,t):f(q.name,C,B,t),n.index=r,n.file=q,n.downloadStartTime=s,n.currentStart=s,n.currentProgress=0,n.global_progress_index=u,n.startData=0,n.addEventListener("progress",g,!1),jQuery.isFunction(w.url)?l.open(w.requestType,w.url(),!0):l.open(w.requestType,w.url,!0),l.setRequestHeader("content-type","multipart/form-data; boundary="+t),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.each(w.headers,function(a,b){l.setRequestHeader(a,b)}),l.sendAsBinary(d),x[u]=0,h(),w.uploadStarted(r,q,z),l.onload=function(){var a=null;if(l.responseText)try{a=jQuery.parseJSON(l.responseText)}catch(b){a=l.responseText}var d=(new Date).getTime(),f=d-s,g=w.uploadFinished(r,q,a,f,l);e++,o.forEach(function(a,b){a===c&&o.splice(b,1)}),p.push(c),x[u]=100,h(),e===z-i&&m(),g===!1&&(y=!0),(l.status<200||l.status>299)&&w.error(l.statusText,q,c,l.status)}};s()}function j(a){for(var b=0;z>b;b++)if(v[b].size===a)return b;return void 0}function k(a){return w.rename(a)}function l(a){return w.beforeEach(a)}function m(){return w.afterAll()}function n(a){clearTimeout(u),a.preventDefault(),w.dragEnter.call(this,a)}function o(a){clearTimeout(u),a.preventDefault(),w.docOver.call(this,a),w.dragOver.call(this,a)}function p(a){clearTimeout(u),w.dragLeave.call(this,a),a.stopPropagation()}function q(a){return a.preventDefault(),w.docLeave.call(this,a),!1}function r(a){return clearTimeout(u),a.preventDefault(),w.docEnter.call(this,a),!1}function s(a){return clearTimeout(u),a.preventDefault(),w.docOver.call(this,a),!1}function t(a){u=setTimeout(function(b){return function(){w.docLeave.call(b,a)}}(this),200)}var u,v,w=a.extend({},c,b),x=[],y=!1,z=0;return a("#"+w.fallback_id).css({display:"none",width:0,height:0}),this.on("drop",e).on("dragstart",w.dragStart).on("dragenter",n).on("dragover",o).on("dragleave",p),a(document).on("drop",q).on("dragenter",r).on("dragover",s).on("dragleave",t),this.on("click",function(b){a("#"+w.fallback_id).trigger(b)}),a("#"+w.fallback_id).change(function(a){w.drop(a),v=a.target.files,z=v.length,i()}),this};try{if(XMLHttpRequest.prototype.sendAsBinary)return;XMLHttpRequest.prototype.sendAsBinary=function(a){function b(a){return 255&a.charCodeAt(0)}var c=Array.prototype.map.call(a,b),d=new Uint8Array(c);this.send("ArrayBufferView"in window?d:d.buffer)}}catch(e){}}(jQuery),function(a){"use strict";a.fn.serializeJSON=function(){var b,c;return b={},c=this.serializeArray(),a.each(c,function(c,d){var e,f,g;e=d.name,f=d.value,g=a.map(e.split("["),function(a){var b;return b=a[a.length-1],"]"===b?a.substring(0,a.length-1):a}),""===g[0]&&g.shift(),a.deepSet(b,g,f)}),b};var b=function(a){return a===Object(a)};a.deepSet=function(c,d,e){if(!d||0===d.length)throw new Error("ArgumentError: keys param expected to be an array with least one key");var f,g,h,i,j,k;f=d[0],g=d[1],void 0!==g&&null!==g?(h=d.slice(1),""===f&&(j=c.length-1,k=c[c.length-1],b(k)&&!k[g]?f=j:(c.push({}),f=j+1)),void 0===c[f]&&(i=""!==g&&isNaN(parseInt(g,10))?{}:[],c[f]=i),a.deepSet(c[f],h,e)):""===f?c.push(e):c[f]=e}}(jQuery),"object"==typeof module&&(module.exports=MediumEditor),function(a,b){"use strict";function c(a,b){var c;if(void 0===a)return b;for(c in b)b.hasOwnProperty(c)&&a.hasOwnProperty(c)===!1&&(a[c]=b[c]);return a}function d(){var b,c,d,e=a.getSelection();if(e.getRangeAt&&e.rangeCount){for(d=[],b=0,c=e.rangeCount;c>b;b+=1)d.push(e.getRangeAt(b));return d}return null}function e(b){var c,d,e=a.getSelection();if(b)for(e.removeAllRanges(),c=0,d=b.length;d>c;c+=1)e.addRange(b[c])}function f(){var a=b.getSelection().anchorNode,c=a&&3===a.nodeType?a.parentNode:a;return c}function g(){var c,d,e,f,g="";if(void 0!==a.getSelection){if(d=a.getSelection(),d.rangeCount){for(f=b.createElement("div"),c=0,e=d.rangeCount;e>c;c+=1)f.appendChild(d.getRangeAt(c).cloneContents());g=f.innerHTML}}else void 0!==b.selection&&"Text"===b.selection.type&&(g=b.selection.createRange().htmlText);return g}MediumEditor.prototype={defaults:{allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableToolbar:!1,firstHeader:"h3",forcePlainText:!0,placeholder:"Type your text",secondHeader:"h4",targetBlank:!1},init:function(a,d){return this.elements="string"==typeof a?b.querySelectorAll(a):a,0!==this.elements.length?(this.isActive=!0,this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.id=b.querySelectorAll(".medium-editor-toolbar").length+1,this.options=c(d,this.defaults),this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions()):void 0},initElements:function(){var a,b=!1;for(a=0;a<this.elements.length;a+=1)this.elements[a].setAttribute("contentEditable",!0),this.elements[a].getAttribute("data-placeholder")||this.elements[a].setAttribute("data-placeholder",this.options.placeholder),this.elements[a].setAttribute("data-medium-element",!0),this.bindParagraphCreation(a).bindReturn(a).bindTab(a),this.options.disableToolbar||this.elements[a].getAttribute("data-disable-toolbar")||(b=!0);return b&&this.initToolbar().bindButtons().bindAnchorForm(),this},serialize:function(){var a,b,c={};for(a=0;a<this.elements.length;a+=1)b=""!==this.elements[a].id?this.elements[a].id:"element-"+a,c[b]={value:this.elements[a].innerHTML.trim()};return c},bindParagraphCreation:function(a){var c=this;return this.elements[a].addEventListener("keyup",function(a){var d,e=f();e&&e.getAttribute("data-medium-element")&&0===e.children.length&&!c.options.disableReturn&&!e.getAttribute("data-disable-return")&&b.execCommand("formatBlock",!1,"p"),13!==a.which||a.shiftKey||(e=f(),d=e.tagName.toLowerCase(),c.options.disableReturn||this.getAttribute("data-disable-return")||"li"===d||(b.execCommand("formatBlock",!1,"p"),"a"===d&&b.execCommand("unlink",!1,null)))}),this},bindReturn:function(a){var b=this;return this.elements[a].addEventListener("keypress",function(a){13===a.which&&(b.options.disableReturn||this.getAttribute("data-disable-return"))&&a.preventDefault()}),this},bindTab:function(a){this.elements[a].addEventListener("keydown",function(a){if(9===a.which){var c=f().tagName.toLowerCase();"pre"===c&&(a.preventDefault(),b.execCommand("insertHtml",null,"    "))}})},buttonTemplate:function(a){var b=this.getButtonLabels(this.options.buttonLabels),c={bold:'<li><button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b">'+b.bold+"</button></li>",italic:'<li><button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i">'+b.italic+"</button></li>",underline:'<li><button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u">'+b.underline+"</button></li>",strikethrough:'<li><button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike"><strike>A</strike></button></li>',superscript:'<li><button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup">'+b.superscript+"</button></li>",subscript:'<li><button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub">'+b.subscript+"</button></li>",anchor:'<li><button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a">'+b.anchor+"</button></li>",header1:'<li><button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'">'+b.header1+"</button></li>",header2:'<li><button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'">'+b.header2+"</button></li>",quote:'<li><button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote">'+b.quote+"</button></li>",orderedlist:'<li><button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol">'+b.orderedlist+"</button></li>",unorderedlist:'<li><button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul">'+b.unorderedlist+"</button></li>",pre:'<li><button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre">'+b.pre+"</button></li>"};return c[a]||!1},getButtonLabels:function(a){var b,c,d={bold:"<b>B</b>",italic:"<b><i>I<i></b>",underline:"<b><u>U</u></b>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sup></b>",anchor:"<b>#</b>",header1:"<b>H1</b>",header2:"<b>H2</b>",quote:"<b>&ldquo;</b>",orderedlist:"<b>1.</b>",unorderedlist:"<b>&bull;</b>",pre:"<b>0101</b>"};if("fontawesome"===a?b={bold:'<i class="fa fa-bold"></i>',italic:'<i class="fa fa-italic"></i>',underline:'<i class="fa fa-underline"></i>',superscript:'<i class="fa fa-superscript"></i>',subscript:'<i class="fa fa-subscript"></i>',anchor:'<i class="fa fa-link"></i>',quote:'<i class="fa fa-quote-right"></i>',orderedlist:'<i class="fa fa-list-ol"></i>',unorderedlist:'<i class="fa fa-list-ul"></i>',pre:'<i class="fa fa-code fa-lg"></i>'}:"object"==typeof a&&(b=a),"object"==typeof b)for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},toolbarTemplate:function(){var a,b,c=this.options.buttons,d='<ul id="medium-editor-toolbar-actions" class="medium-editor-toolbar-actions clearfix">';for(a=0;a<c.length;a+=1)b=this.buttonTemplate(c[a]),b&&(d+=b);return d+='</ul><div class="medium-editor-toolbar-form-anchor" id="medium-editor-toolbar-form-anchor">    <input type="text" value="" placeholder="'+this.options.anchorInputPlaceholder+'">    <a href="#">&times;</a></div>'},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.anchorForm=this.toolbar.querySelector(".medium-editor-toolbar-form-anchor"),this.anchorInput=this.anchorForm.querySelector("input"),this.toolbarActions=this.toolbar.querySelector(".medium-editor-toolbar-actions"),this)},createToolbar:function(){var a=b.createElement("div");return a.id="medium-editor-toolbar-"+this.id,a.className="medium-editor-toolbar",a.innerHTML=this.toolbarTemplate(),b.getElementsByTagName("body")[0].appendChild(a),a},bindSelect:function(){var a,c=this,d="";for(this.checkSelectionWrapper=function(){clearTimeout(d),d=setTimeout(function(){c.checkSelection()},c.options.delay)},b.documentElement.addEventListener("mouseup",this.checkSelectionWrapper),a=0;a<this.elements.length;a+=1)this.elements[a].addEventListener("keyup",this.checkSelectionWrapper),this.elements[a].addEventListener("blur",this.checkSelectionWrapper);return this},checkSelection:function(){var b,c,d,e,f;if(this.keepToolbarAlive!==!0&&!this.options.disableToolbar)if(c=a.getSelection(),e=g(),e=e.replace(/<[\S]+><\/[\S]+>/gim,""),d=e.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g),d=d?d.length:0,""===c.toString().trim()||this.options.allowMultiParagraphSelection===!1&&d)this.hideToolbarActions();else if(f=this.getSelectionElement(),!f||f.getAttribute("data-disable-toolbar"))this.hideToolbarActions();else{for(this.selection=c,this.selectionRange=this.selection.getRangeAt(0),b=0;b<this.elements.length;b+=1)if(this.elements[b]===f)return void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();this.hideToolbarActions()}return this},getSelectionElement:function(){var b,c=a.getSelection(),d=c.getRangeAt(0),e=d.commonAncestorContainer,f=e.parentNode,g=function(a){var b=a;try{for(;!b.getAttribute("data-medium-element");)b=b.parentNode}catch(c){return!1}return b};try{b=e.getAttribute("data-medium-element")?e:g(f)}catch(h){b=g(f)}return b},setToolbarPosition:function(){var b=50,c=a.getSelection(),d=c.getRangeAt(0),e=d.getBoundingClientRect(),f=this.options.diffLeft-this.toolbar.offsetWidth/2,g=(e.left+e.right)/2,h=this.toolbar.offsetWidth/2;return e.top<b?(this.toolbar.classList.add("medium-toolbar-arrow-over"),this.toolbar.classList.remove("medium-toolbar-arrow-under"),this.toolbar.style.top=b+e.bottom-this.options.diffTop+a.pageYOffset-this.toolbar.offsetHeight+"px"):(this.toolbar.classList.add("medium-toolbar-arrow-under"),this.toolbar.classList.remove("medium-toolbar-arrow-over"),this.toolbar.style.top=e.top+this.options.diffTop+a.pageYOffset-this.toolbar.offsetHeight+"px"),this.toolbar.style.left=h>g?f+h+"px":a.innerWidth-g<h?a.innerWidth+f-h+"px":f+g+"px",this},setToolbarButtonStates:function(){var a,b=this.toolbarActions.querySelectorAll("button");for(a=0;a<b.length;a+=1)b[a].classList.remove("medium-editor-button-active");return this.checkActiveButtons(),this},checkActiveButtons:function(){var a=this.selection.anchorNode;for(a.tagName||(a=this.selection.anchorNode.parentNode);void 0!==a.tagName&&-1===this.parentElements.indexOf(a.tagName);)this.activateButton(a.tagName.toLowerCase()),a=a.parentNode},activateButton:function(a){var b=this.toolbar.querySelector('[data-element="'+a+'"]');null!==b&&-1===b.className.indexOf("medium-editor-button-active")&&(b.className+=" medium-editor-button-active")},bindButtons:function(){var a,b=this.toolbar.querySelectorAll("button"),c=this,d=function(a){a.preventDefault(),a.stopPropagation(),void 0===c.selection&&c.checkSelection(),this.className.indexOf("medium-editor-button-active")>-1?this.classList.remove("medium-editor-button-active"):this.className+=" medium-editor-button-active",console.log(this.getAttribute("data-action")),c.execAction(this.getAttribute("data-action"),a)};for(a=0;a<b.length;a+=1)b[a].addEventListener("click",d);return this.setFirstAndLastItems(b),this},setFirstAndLastItems:function(a){return a[0].className+=" medium-editor-button-first",a[a.length-1].className+=" medium-editor-button-last",this},execAction:function(a,c){a.indexOf("append-")>-1?(this.execFormatBlock(a.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===a?this.triggerAnchorAction(c):(b.execCommand(a,!1,null),this.setToolbarPosition())},triggerAnchorAction:function(){return"a"===this.selection.anchorNode.parentNode.tagName.toLowerCase()?b.execCommand("unlink",!1,null):"block"===this.anchorForm.style.display?this.showToolbarActions():this.showAnchorForm(),this},execFormatBlock:function(a){var c=this.getSelectionData(this.selection.anchorNode);return"blockquote"===a&&c.el&&"blockquote"===c.el.parentNode.tagName.toLowerCase()?b.execCommand("outdent",!1,null):(c.tagName===a&&(a="p"),b.execCommand("formatBlock",!1,a))},getSelectionData:function(a){var b;for(a&&a.tagName&&(b=a.tagName.toLowerCase());a&&-1===this.parentElements.indexOf(b);)a=a.parentNode,a&&a.tagName&&(b=a.tagName.toLowerCase());return{el:a,tagName:b}},getFirstChild:function(a){for(var b=a.firstChild;null!==b&&1!==b.nodeType;)b=b.nextSibling;return b},bindElementToolbarEvents:function(a){var b=this;a.addEventListener("mouseup",function(){b.checkSelection()}),a.addEventListener("keyup",function(){b.checkSelection()})},hideToolbarActions:function(){this.keepToolbarAlive=!1,this.toolbar.classList.remove("medium-editor-toolbar-active")},showToolbarActions:function(){var a,b=this;this.anchorForm.style.display="none",this.toolbarActions.style.display="block",this.keepToolbarAlive=!1,clearTimeout(a),a=setTimeout(function(){b.toolbar.classList.contains("medium-editor-toolbar-active")||b.toolbar.classList.add("medium-editor-toolbar-active")},100)},showAnchorForm:function(){this.toolbarActions.style.display="none",this.savedSelection=d(),this.anchorForm.style.display="block",this.keepToolbarAlive=!0,this.anchorInput.focus(),this.anchorInput.value=""},bindAnchorForm:function(){var a=this.anchorForm.querySelector("a"),b=this;return this.anchorForm.addEventListener("click",function(a){a.stopPropagation()}),this.anchorInput.addEventListener("keyup",function(a){13===a.keyCode&&(a.preventDefault(),b.createLink(this))}),this.anchorInput.addEventListener("blur",function(){b.keepToolbarAlive=!1,b.checkSelection()}),a.addEventListener("click",function(a){a.preventDefault(),b.showToolbarActions(),e(b.savedSelection)}),this},setTargetBlank:function(){var a,b=f();if("a"===b.tagName.toLowerCase())b.target="_blank";else for(b=b.getElementsByTagName("a"),a=0;a<b.length;a+=1)b[a].target="_blank"},createLink:function(a){e(this.savedSelection),b.execCommand("createLink",!1,a.value),this.options.targetBlank&&this.setTargetBlank(),this.showToolbarActions(),a.value=""},bindWindowActions:function(){var b,c=this;return a.addEventListener("resize",function(){clearTimeout(b),b=setTimeout(function(){c.toolbar.classList.contains("medium-editor-toolbar-active")&&c.setToolbarPosition()},100)}),this},activate:function(){var a;if(!this.isActive){for(void 0!==this.toolbar&&(this.toolbar.style.display="block"),this.isActive=!0,a=0;a<this.elements.length;a+=1)this.elements[a].setAttribute("contentEditable",!0);this.bindSelect()}},deactivate:function(){var a;if(this.isActive)for(this.isActive=!1,void 0!==this.toolbar&&(this.toolbar.style.display="none"),b.documentElement.removeEventListener("mouseup",this.checkSelectionWrapper),a=0;a<this.elements.length;a+=1)this.elements[a].removeEventListener("keyup",this.checkSelectionWrapper),this.elements[a].removeEventListener("blur",this.checkSelectionWrapper),this.elements[a].removeAttribute("contentEditable")},bindPaste:function(){if(!this.options.forcePlainText)return this;var a,c=this,d=function(a){var d,e,f="";if(this.classList.remove("medium-editor-placeholder"),a.clipboardData&&a.clipboardData.getData)if(a.preventDefault(),c.options.disableReturn)b.execCommand("insertHTML",!1,a.clipboardData.getData("text/plain"));else{for(d=a.clipboardData.getData("text/plain").split(/[\r\n]/g),e=0;e<d.length;e+=1)""!==d[e]&&(f+="<p>"+d[e]+"</p>");b.execCommand("insertHTML",!1,f)}};for(a=0;a<this.elements.length;a+=1)this.elements[a].addEventListener("paste",d);return this},setPlaceholders:function(){var a,b=function(a){""===a.textContent.replace(/^\s+|\s+$/g,"")&&a.classList.add("medium-editor-placeholder")},c=function(a){this.classList.remove("medium-editor-placeholder"),"keypress"!==a.type&&b(this)};for(a=0;a<this.elements.length;a+=1)b(this.elements[a]),this.elements[a].addEventListener("blur",c),this.elements[a].addEventListener("keypress",c);return this}}}(window,document),function(a){MediumEditor.prototype.serialize=function(){var b,c,d,e,f,g,h,i,j={};for(b=0;b<this.elements.length;b+=1){for(d=""!==this.elements[b].id?this.elements[b].id:"element-"+b,e=a(this.elements[b]).clone(),f=a(".mediumInsert",e),c=0;c<f.length;c++)g=a(f[c]),h=a(".mediumInsert-placeholder",g).children(),0===h.length?g.remove():(g.removeAttr("contenteditable"),a("img[draggable]",g).removeAttr("draggable"),g.hasClass("small")&&h.addClass("small"),a(".mediumInsert-buttons",g).remove(),h.unwrap());i=e.html().trim(),j[d]={value:i}}return j},a.fn.mediumInsert=function(b){return a.fn.mediumInsert.settings=a.extend(a.fn.mediumInsert.settings,b),this.each(function(){a("p",this).bind("dragover drop",function(a){return a.preventDefault(),!1}),a.fn.mediumInsert.insert.init(a(this)),a.fn.mediumInsert.settings.images===!0&&a.fn.mediumInsert.images.init(),a.fn.mediumInsert.settings.maps===!0&&a.fn.mediumInsert.maps.init()})},a.fn.mediumInsert.settings={imagesUploadScript:"upload.php",images:!0,maps:!1},a.fn.mediumInsert.insert={init:function(a){this.$el=a,this.setPlaceholders()},deselect:function(){document.getSelection().removeAllRanges()},setPlaceholders:function(){var b=this,c=a.fn.mediumInsert.insert.$el,d="",e='<a class="mediumInsert-action action-images-add">Upload image</a>',f='<a class="mediumInsert-action action-maps-add">Map</a>';a.fn.mediumInsert.settings.images===!0&&a.fn.mediumInsert.settings.maps===!0?d='<a class="mediumInsert-buttonsShow">Insert</a><ul class="mediumInsert-buttonsOptions"><li>'+e+"</li><li>"+f+"</li></ul>":a.fn.mediumInsert.settings.images===!0?d=e:a.fn.mediumInsert.settings.maps===!0&&(d=f),""!==d&&(d='<div class="mediumInsert" contenteditable="false"><div class="mediumInsert-buttons"><div class="mediumInsert-buttonsIcon">&rarr;</div>'+d+'</div><div class="mediumInsert-placeholder"></div></div>',c.is(":empty")&&c.html("<p><br></p>"),c.keyup(function(){var b=0;c.children("p").each(function(){a(this).next().hasClass("mediumInsert")===!1&&(a(this).after(d),a(this).next(".mediumInsert").attr("id","mediumInsert-"+b)),b++})}).keyup(),c.on("selectstart",".mediumInsert",function(a){return a.preventDefault(),!1}),c.on("blur",function(){var b,c=a(this).clone();c.find(".mediumInsert").remove(),b=c.html().replace(/^\s+|\s+$/g,""),(""===b||"<p><br></p>"===b)&&a(this).addClass("medium-editor-placeholder")}),c.on("click",".mediumInsert-buttons a.mediumInsert-buttonsShow",function(){var c=a(this).siblings(".mediumInsert-buttonsOptions"),d=a(this).parent().siblings(".mediumInsert-placeholder");a(this).hasClass("active")?(a(this).removeClass("active"),c.hide(),a("a",c).show()):(a(this).addClass("active"),c.show(),a("a",c).each(function(){var b=a(this).attr("class").split("action-")[1],e=b.split("-")[0];a(".mediumInsert-"+e,d).length>0&&a("a:not(.action-"+b+")",c).hide()})),b.deselect()}),c.on("mouseleave",".mediumInsert",function(){a("a.mediumInsert-buttonsShow",this).removeClass("active"),a(".mediumInsert-buttonsOptions",this).hide()}),c.on("click",".mediumInsert-buttons .mediumInsert-action",function(){var b=a(this).attr("class").split("action-")[1].split("-"),c=a(this).parents(".mediumInsert-buttons").siblings(".mediumInsert-placeholder");a.fn.mediumInsert[b[0]]&&a.fn.mediumInsert[b[0]][b[1]]&&a.fn.mediumInsert[b[0]][b[1]](c),a(this).parents(".mediumInsert").mouseleave()}))}}}(jQuery),function(a){a.fn.mediumInsert.images={init:function(){this.$el=a.fn.mediumInsert.insert.$el,this.options=a.extend(this.default,a.fn.mediumInsert.settings.imagesPlugin),this.setImageEvents(),this.setDragAndDropEvents(),this.preparePreviousImages()},"default":{formatData:function(a){var b=new FormData;return b.append("file",a),b}},preparePreviousImages:function(){this.$el.find(".mediumInsert-images").each(function(){var b=a(this).parent();b.html('<div class="mediumInsert-placeholder" draggable="true">'+b.html()+"</div>")})},add:function(b){var c,d,e=this;return c=a('<input type="file">').click(),c.change(function(){d=this.files,e.uploadFiles(b,d)}),a.fn.mediumInsert.insert.deselect(),c},updateProgressBar:function(b){var c,d=a(".progress:first",this.$el);b.lengthComputable&&(c=b.loaded/b.total*100|0,d.attr("value",c),d.html(c))},uploadCompleted:function(b){var c,d=a(".progress:first",this.$el);d.attr("value",100),d.html(100),d.before('<div class="mediumInsert-images"><img src="'+b.responseText+'" draggable="true" alt=""></div>'),c=d.siblings("img"),d.remove(),c.load(function(){c.parent().mouseleave().mouseenter()})},uploadFiles:function(b,c){for(var d={"image/png":!0,"image/jpeg":!0,"image/gif":!0},e=this,f=function(){var a=new XMLHttpRequest;return a.upload.onprogress=e.updateProgressBar,a},g=0;g<c.length;g++){var h=c[g];d[h.type]===!0&&(b.append('<progress class="progress" min="0" max="100" value="0">0</progress>'),a.ajax({type:"post",url:a.fn.mediumInsert.settings.imagesUploadScript,xhr:f,cache:!1,contentType:!1,complete:this.uploadCompleted,processData:!1,data:this.options.formatData(h)}))}},setImageEvents:function(){this.$el.on("mouseenter",".mediumInsert-images",function(){var b,c,d=a("img",this);d.length>0&&(a(this).append('<a class="mediumInsert-imageRemove"></a>'),a(this).append(a(this).parent().parent().hasClass("small")?'<a class="mediumInsert-imageResizeBigger"></a>':'<a class="mediumInsert-imageResizeSmaller"></a>'),b=d.position().top+parseInt(d.css("margin-top"),10),c=d.position().left+d.width()-30,a(".mediumInsert-imageRemove",this).css({right:"auto",top:b,left:c}),a(".mediumInsert-imageResizeBigger, .mediumInsert-imageResizeSmaller",this).css({right:"auto",top:b,left:c-31}))}),this.$el.on("mouseleave",".mediumInsert-images",function(){a(".mediumInsert-imageRemove, .mediumInsert-imageResizeSmaller, .mediumInsert-imageResizeBigger",this).remove()}),this.$el.on("click",".mediumInsert-imageResizeSmaller",function(){a(this).parent().parent().parent().addClass("small"),a(this).parent().mouseleave().mouseleave(),a.fn.mediumInsert.insert.deselect()}),this.$el.on("click",".mediumInsert-imageResizeBigger",function(){a(this).parent().parent().parent().removeClass("small"),a(this).parent().mouseleave().mouseleave(),a.fn.mediumInsert.insert.deselect()}),this.$el.on("click",".mediumInsert-imageRemove",function(){0===a(this).parent().siblings().length&&a(this).parent().parent().parent().removeClass("small"),a(this).parent().remove(),a.fn.mediumInsert.insert.deselect()})},setDragAndDropEvents:function(){var b,c,d=this,e=!1,f=!1;a(document).on("dragover","body",function(){a(this).addClass("hover")}),a(document).on("dragend","body",function(){a(this).removeClass("hover")}),this.$el.on("dragover",".mediumInsert",function(){a(this).addClass("hover"),a(this).attr("contenteditable",!0)}),this.$el.on("dragleave",".mediumInsert",function(){a(this).removeClass("hover"),a(this).attr("contenteditable",!1)}),this.$el.on("dragstart",".mediumInsert .mediumInsert-images img",function(){b=a(this).parent().index(),c=a(this).parent().parent().parent().attr("id")}),this.$el.on("dragend",".mediumInsert .mediumInsert-images img",function(b){e===!0&&(0===a(b.originalEvent.target.parentNode).siblings().length&&a(b.originalEvent.target.parentNode).parent().parent().removeClass("small"),a(b.originalEvent.target.parentNode).mouseleave(),a(b.originalEvent.target.parentNode).remove(),e=!1,f=!1)}),this.$el.on("dragover",".mediumInsert .mediumInsert-images img",function(a){a.preventDefault()}),this.$el.on("drop",".mediumInsert .mediumInsert-images img",function(){var d,e,g;return c!==a(this).parent().parent().parent().attr("id")?(f=!1,void(b=c=null)):(d=parseInt(b,10),e=a(this).parent().parent().find(".mediumInsert-images:nth-child("+(d+1)+")"),g=a(this).parent().index(),g>d?e.insertAfter(a(this).parent()):d>g&&e.insertBefore(a(this).parent()),e.mouseleave(),f=!0,void(b=null))}),this.$el.on("drop",".mediumInsert",function(b){var c;b.preventDefault(),a(this).removeClass("hover"),a("body").removeClass("hover"),a(this).attr("contenteditable",!1),c=b.originalEvent.dataTransfer.files,c.length>0?d.uploadFiles(a(".mediumInsert-placeholder",this),c):f===!0?f=!1:(a(".mediumInsert-placeholder",this).append('<div class="mediumInsert-images">'+b.originalEvent.dataTransfer.getData("text/html")+"</div>"),a("meta",this).remove(),e=!0)})}}}(jQuery),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function d(){}function e(a){u(a),g(this,a)}function f(a){var b=o(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b,c){for(var d=Math.abs(a)+"",e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&cb.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function m(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function n(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Qb[a]||Rb[b]||b}return a}function o(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=n(c),b&&(d[b]=a[c]));return d
}function p(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}cb[b]=function(e,f){var g,h,i=cb.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=cb().utc().set(d,a);return i.call(cb.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function r(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function s(a){return t(a)?366:365}function t(a){return a%4===0&&a%100!==0||a%400===0}function u(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ib]<0||a._a[ib]>11?ib:a._a[jb]<1||a._a[jb]>r(a._a[hb],a._a[ib])?jb:a._a[kb]<0||a._a[kb]>23?kb:a._a[lb]<0||a._a[lb]>59?lb:a._a[mb]<0||a._a[mb]>59?mb:a._a[nb]<0||a._a[nb]>999?nb:-1,a._pf._overflowDayOfYear&&(hb>b||b>jb)&&(b=jb),a._pf.overflow=b)}function v(a){a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function w(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function x(a){return a?a.toLowerCase().replace("_","-"):a}function y(a,b){return b._isUTC?cb(a).zone(b._offset||0):cb(a).local()}function z(a,b){return b.abbr=a,ob[a]||(ob[a]=new d),ob[a].set(b),ob[a]}function A(a){delete ob[a]}function B(a){var b,c,d,e,f=0,g=function(a){if(!ob[a]&&pb)try{require("./lang/"+a)}catch(b){}return ob[a]};if(!a)return cb.fn._lang;if(!k(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=x(a[f]).split("-"),b=e.length,d=x(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&m(e,d,!0)>=b-1)break;b--}f++}return cb.fn._lang}function C(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function D(a){var b,c,d=a.match(tb);for(b=0,c=d.length;c>b;b++)d[b]=Vb[d[b]]?Vb[d[b]]:C(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function E(a,b){return a.isValid()?(b=F(b,a.lang()),Sb[b]||(Sb[b]=D(b)),Sb[b](a)):a.lang().invalidDate()}function F(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(ub.lastIndex=0;d>=0&&ub.test(a);)a=a.replace(ub,c),ub.lastIndex=0,d-=1;return a}function G(a,b){var c,d=b._strict;switch(a){case"DDDD":return Gb;case"YYYY":case"GGGG":case"gggg":return d?Hb:xb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Ib:yb;case"S":if(d)return Eb;case"SS":if(d)return Fb;case"SSS":case"DDD":return d?Gb:wb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ab;case"a":case"A":return B(b._l)._meridiemParse;case"X":return Db;case"Z":case"ZZ":return Bb;case"T":return Cb;case"SSSS":return zb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Fb:vb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return d?Eb:vb;default:return c=new RegExp(O(N(a.replace("\\","")),"i"))}}function H(a){a=a||"";var b=a.match(Bb)||[],c=b[b.length-1]||[],d=(c+"").match(Nb)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?-e:e}function I(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ib]=q(b)-1);break;case"MMM":case"MMMM":d=B(c._l).monthsParse(b),null!=d?e[ib]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[jb]=q(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=q(b));break;case"YY":e[hb]=q(b)+(q(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[hb]=q(b);break;case"a":case"A":c._isPm=B(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[kb]=q(b);break;case"m":case"mm":e[lb]=q(b);break;case"s":case"ss":e[mb]=q(b);break;case"S":case"SS":case"SSS":case"SSSS":e[nb]=q(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=H(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function J(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=L(a),a._w&&null==a._a[jb]&&null==a._a[ib]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[hb]?cb().weekYear():a._a[hb]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Y(f(g.GG),g.W||1,g.E,4,1):(i=B(a._l),j=null!=g.d?U(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Y(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[hb]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[hb]?d[hb]:a._a[hb],a._dayOfYear>s(e)&&(a._pf._overflowDayOfYear=!0),c=T(e,0,a._dayOfYear),a._a[ib]=c.getUTCMonth(),a._a[jb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[kb]+=q((a._tzm||0)/60),l[lb]+=q((a._tzm||0)%60),a._d=(a._useUTC?T:S).apply(null,l)}}function K(a){var b;a._d||(b=o(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],J(a))}function L(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function M(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=B(a._l),h=""+a._i,i=h.length,j=0;for(d=F(a._f,g).match(tb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(G(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Vb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),I(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[kb]<12&&(a._a[kb]+=12),a._isPm===!1&&12===a._a[kb]&&(a._a[kb]=0),J(a),u(a)}function N(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function O(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function P(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(e=0;e<a._f.length;e++)f=0,b=g({},a),v(b),b._f=a._f[e],M(b),w(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function Q(a){var b,c=a._i,d=Jb.exec(c);if(d){for(a._pf.iso=!0,b=4;b>0;b--)if(d[b]){a._f=Lb[b-1]+(d[6]||" ");break}for(b=0;4>b;b++)if(Mb[b][1].exec(c)){a._f+=Mb[b][0];break}c.match(Bb)&&(a._f+="Z"),M(a)}else a._d=new Date(c)}function R(b){var c=b._i,d=qb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?Q(b):k(c)?(b._a=c.slice(0),J(b)):l(c)?b._d=new Date(+c):"object"==typeof c?K(b):b._d=new Date(c)}function S(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function T(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function U(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function V(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function W(a,b,c){var d=gb(Math.abs(a)/1e3),e=gb(d/60),f=gb(e/60),g=gb(f/24),h=gb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",gb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,V.apply({},i)}function X(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=cb(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Y(a,b,c,d,e){var f,g,h=new Date(i(a,6,!0)+"-01-01").getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:s(a-1)+g}}function Z(a){var b=a._i,c=a._f;return"undefined"==typeof a._pf&&v(a),null===b?cb.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=B().preparse(b)),cb.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?P(a):M(a):R(a),new e(a))}function $(a,b){cb.fn[a]=cb.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),cb.updateOffset(this),this):this._d["get"+c+b]()}}function _(a){cb.duration.fn[a]=function(){return this._data[a]}}function ab(a,b){cb.duration.fn["as"+a]=function(){return+this/b}}function bb(a){var b=!1,c=cb;"undefined"==typeof ender&&(a?(fb.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},g(fb.moment,c)):fb.moment=cb)}for(var cb,db,eb="2.5.0",fb=this,gb=Math.round,hb=0,ib=1,jb=2,kb=3,lb=4,mb=5,nb=6,ob={},pb="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,qb=/^\/?Date\((\-?\d+)/i,rb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,sb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,tb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ub=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,vb=/\d\d?/,wb=/\d{1,3}/,xb=/\d{1,4}/,yb=/[+\-]?\d{1,6}/,zb=/\d+/,Ab=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Bb=/Z|[\+\-]\d\d:?\d\d/gi,Cb=/T/i,Db=/[\+\-]?\d+(\.\d{1,3})?/,Eb=/\d/,Fb=/\d\d/,Gb=/\d{3}/,Hb=/\d{4}/,Ib=/[+\-]?\d{6}/,Jb=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kb="YYYY-MM-DDTHH:mm:ssZ",Lb=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Mb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Nb=/([\+\-]|\d\d)/gi,Ob="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Pb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Qb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Rb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Sb={},Tb="DDD w W M D d".split(" "),Ub="M D H h m s w W".split(" "),Vb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+i(Math.abs(a),6)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return q(this.milliseconds()/100)},SS:function(){return i(q(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},SSSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(a/60),2)+":"+i(q(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(a/60),2)+i(q(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Wb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Tb.length;)db=Tb.pop(),Vb[db+"o"]=c(Vb[db],db);for(;Ub.length;)db=Ub.pop(),Vb[db+db]=b(Vb[db],2);for(Vb.DDDD=b(Vb.DDD,3),g(d.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=cb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=cb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return X(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),cb=function(b,c,d,e){return"boolean"==typeof d&&(e=d,d=a),Z({_i:b,_f:c,_l:d,_strict:e,_isUTC:!1})},cb.utc=function(b,c,d,e){var f;return"boolean"==typeof d&&(e=d,d=a),f=Z({_useUTC:!0,_isUTC:!0,_l:d,_i:b,_f:c,_strict:e}).utc()},cb.unix=function(a){return cb(1e3*a)},cb.duration=function(a,b){var c,d,e,g=a,h=null;return cb.isDuration(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=rb.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[jb])*c,h:q(h[kb])*c,m:q(h[lb])*c,s:q(h[mb])*c,ms:q(h[nb])*c}):(h=sb.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},g={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new f(g),cb.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},cb.version=eb,cb.defaultFormat=Kb,cb.updateOffset=function(){},cb.lang=function(a,b){var c;return a?(b?z(x(a),b):null===b?(A(a),a="en"):ob[a]||B(a),c=cb.duration.fn._lang=cb.fn._lang=B(a),c._abbr):cb.fn._lang._abbr},cb.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),B(a)},cb.isMoment=function(a){return a instanceof e},cb.isDuration=function(a){return a instanceof f},db=Wb.length-1;db>=0;--db)p(Wb[db]);for(cb.normalizeUnits=function(a){return n(a)},cb.invalid=function(a){var b=cb.utc(0/0);return null!=a?g(b._pf,a):b._pf.userInvalidated=!0,b},cb.parseZone=function(a){return cb(a).parseZone()},g(cb.fn=e.prototype,{clone:function(){return cb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=cb(this).utc();return 0<a.year()&&a.year()<=9999?E(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):E(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return w(this)},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?cb.utc(this._a):cb(this._a)).toArray())>0:!1},parsingFlags:function(){return g({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=E(this,a||cb.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?cb.duration(+b,a):cb.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?cb.duration(+b,a):cb.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=y(a,this),g=6e4*(this.zone()-f.zone());return b=n(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-cb(this).startOf("month")-(f-cb(f).startOf("month")))/d,e-=6e4*(this.zone()-cb(this).startOf("month").zone()-(f.zone()-cb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:h(e)},from:function(a,b){return cb.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(cb(),a)},calendar:function(){var a=y(cb(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return t(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=U(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),cb.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=n(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=n(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+cb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+cb(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+y(a,this).startOf(b)},min:function(a){return a=cb.apply(null,arguments),this>a?this:a},max:function(a){return a=cb.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=H(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,cb.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?cb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return r(this.year(),this.month())},dayOfYear:function(a){var b=gb((cb(this).startOf("day")-cb(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=X(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=X(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=n(a),this[a]()},set:function(a,b){return a=n(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=B(b),this)}}),db=0;db<Ob.length;db++)$(Ob[db].toLowerCase().replace(/s$/,""),Ob[db]);$("year","FullYear"),cb.fn.days=cb.fn.day,cb.fn.months=cb.fn.month,cb.fn.weeks=cb.fn.week,cb.fn.isoWeeks=cb.fn.isoWeek,cb.fn.toJSON=cb.fn.toISOString,g(cb.duration.fn=f.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1e3,a=h(e/1e3),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)},humanize:function(a){var b=+this,c=W(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=cb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=cb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=n(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=n(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:cb.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(db in Pb)Pb.hasOwnProperty(db)&&(ab(db,Pb[db]),_(db.toLowerCase()));ab("Weeks",6048e5),cb.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},cb.lang("en",{ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),pb?(module.exports=cb,bb(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&bb(d.config().noGlobal===a),cb}):bb()}.call(this),function(){function padToken(a,b){return function(c){return leftZeroFill(a.call(this,c),b)}}function ordinalizeToken(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function Language(){}function Moment(a){extend(this,a)}function Duration(a){var b=this._data={},c=a.years||a.year||a.y||0,d=a.months||a.month||a.M||0,e=a.weeks||a.week||a.w||0,f=a.days||a.day||a.d||0,g=a.hours||a.hour||a.h||0,h=a.minutes||a.minute||a.m||0,i=a.seconds||a.second||a.s||0,j=a.milliseconds||a.millisecond||a.ms||0;this._milliseconds=j+1e3*i+6e4*h+36e5*g,this._days=f+7*e,this._months=d+12*c,b.milliseconds=j%1e3,i+=absRound(j/1e3),b.seconds=i%60,h+=absRound(i/60),b.minutes=h%60,g+=absRound(h/60),b.hours=g%24,f+=absRound(g/24),f+=7*e,b.days=f%30,d+=absRound(f/30),b.months=d%12,c+=absRound(d/12),b.years=c}function extend(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function absRound(a){return 0>a?Math.ceil(a):Math.floor(a)}function leftZeroFill(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function addOrSubtractDurationFromMoment(a,b,c,d){var e,f,g,h=b._milliseconds,i=b._days,j=b._months;h&&a._d.setTime(+a._d+h*c),(i||j)&&(e=a.minute(),f=a.hour()),i&&a.date(a.date()+i*c),j&&(g=a.date(),a.date(1).month(a.month()+j*c).date(Math.min(g,a.daysInMonth()))),h&&!d&&moment.updateOffset(a),(i||j)&&(a.minute(e),a.hour(f))}function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function compareArrays(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function normalizeUnits(a){return a?unitAliases[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function loadLang(a,b){return b.abbr=a,languages[a]||(languages[a]=new Language),languages[a].set(b),languages[a]}function getLangDefinition(a){return a?(!languages[a]&&hasModule&&require("./lang/"+a),languages[a]):moment.fn._lang}function removeFormattingTokens(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function makeFormatFunction(a){var b,c,d=a.match(formattingTokens);for(b=0,c=d.length;c>b;b++)d[b]=formatTokenFunctions[d[b]]?formatTokenFunctions[d[b]]:removeFormattingTokens(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function formatMoment(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&localFormattingTokens.test(b);)b=b.replace(localFormattingTokens,c);return formatFunctions[b]||(formatFunctions[b]=makeFormatFunction(b)),formatFunctions[b](a)}function getParseRegexForToken(a,b){switch(a){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"YYYYY":return parseTokenSixDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(b._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return new RegExp(a.replace("\\",""))}}function timezoneMinutesFromString(a){var b=(parseTokenTimezone.exec(a)||[])[0],c=(b+"").match(parseTimezoneChunker)||["-",0,0],d=+(60*c[1])+~~c[2];return"+"===c[0]?-d:d}function addTimeToArrayFromToken(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=getLangDefinition(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm=getLangDefinition(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=timezoneMinutesFromString(b)}null==b&&(c._isValid=!1)}function dateFromArray(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=~~((a._tzm||0)/60),d[4]+=~~((a._tzm||0)%60),c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function makeDateFromStringAndFormat(a){var b,c,d=a._f.match(formattingTokens),e=a._i;for(a._a=[],b=0;b<d.length;b++)c=(getParseRegexForToken(d[b],a).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),formatTokenFunctions[d[b]]&&addTimeToArrayFromToken(d[b],c,a);e&&(a._il=e),a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),dateFromArray(a)}function makeDateFromStringAndArray(a){var b,c,d,e,f,g=99;for(e=0;e<a._f.length;e++)b=extend({},a),b._f=a._f[e],makeDateFromStringAndFormat(b),c=new Moment(b),f=compareArrays(b._a,c.toArray()),c._il&&(f+=c._il.length),g>f&&(g=f,d=c);extend(a,d)}function makeDateFromString(a){var b,c=a._i,d=isoRegex.exec(c);if(d){for(a._f="YYYY-MM-DD"+(d[2]||" "),b=0;4>b;b++)if(isoTimes[b][1].exec(c)){a._f+=isoTimes[b][0];break}parseTokenTimezone.exec(c)&&(a._f+=" Z"),makeDateFromStringAndFormat(a)}else a._d=new Date(c)}function makeDateFromInput(a){var b=a._i,c=aspNetJsonRegex.exec(b);void 0===b?a._d=new Date:c?a._d=new Date(+c[1]):"string"==typeof b?makeDateFromString(a):isArray(b)?(a._a=b.slice(0),dateFromArray(a)):a._d=new Date(b instanceof Date?+b:b)}function substituteTimeAgo(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function relativeTime(a,b,c){var d=round(Math.abs(a)/1e3),e=round(d/60),f=round(e/60),g=round(f/24),h=round(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",round(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,substituteTimeAgo.apply({},i)}function weekOfYear(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=moment(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function makeMoment(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=getLangDefinition().preparse(b)),moment.isMoment(b)?(a=extend({},b),a._d=new Date(+b._d)):c?isArray(c)?makeDateFromStringAndArray(a):makeDateFromStringAndFormat(a):makeDateFromInput(a),new Moment(a))}function makeGetterAndSetter(a,b){moment.fn[a]=moment.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),moment.updateOffset(this),this):this._d["get"+c+b]()}}function makeDurationGetter(a){moment.duration.fn[a]=function(){return this._data[a]}}function makeDurationAsGetter(a,b){moment.duration.fn["as"+a]=function(){return+this/b}}for(var moment,VERSION="2.0.0",round=Math.round,i,languages={},hasModule="undefined"!=typeof module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseMultipleFormatChunker=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenSixDigits=/[+\-]?\d{1,6}/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,isoRegex=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1
},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return leftZeroFill(~~(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(~~(a/60),2)+":"+leftZeroFill(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);for(formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),Language.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=moment([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=moment([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return weekOfYear(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},moment=function(a,b,c){return makeMoment({_i:a,_f:b,_l:c,_isUTC:!1})},moment.utc=function(a,b,c){return makeMoment({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},moment.unix=function(a){return moment(1e3*a)},moment.duration=function(a,b){var c,d,e=moment.isDuration(a),f="number"==typeof a,g=e?a._data:f?{}:a,h=aspNetTimeSpanJsonRegex.exec(a);return f?b?g[b]=a:g.milliseconds=a:h&&(c="-"===h[1]?-1:1,g={y:0,d:~~h[2]*c,h:~~h[3]*c,m:~~h[4]*c,s:~~h[5]*c,ms:~~h[6]*c}),d=new Duration(g),e&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.updateOffset=function(){},moment.lang=function(a,b){return a?(b?loadLang(a,b):languages[a]||getLangDefinition(a),void(moment.duration.fn._lang=moment.fn._lang=getLangDefinition(a))):moment.fn._lang._abbr},moment.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),getLangDefinition(a)},moment.isMoment=function(a){return a instanceof Moment},moment.isDuration=function(a){return a instanceof Duration},moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return formatMoment(moment(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=formatMoment(this,a||moment.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?moment.duration(+b,a):moment.duration(a,b),addOrSubtractDurationFromMoment(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?moment.duration(+b,a):moment.duration(a,b),addOrSubtractDurationFromMoment(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?moment(a).zone(this._offset||0):moment(a).local(),g=6e4*(this.zone()-f.zone());return b=normalizeUnits(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-moment(this).startOf("month")-(f-moment(f).startOf("month")))/d,"year"===b&&(e/=12)):(d=this-f-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?d/864e5:"week"===b?d/6048e5:d),c?e:absRound(e)},from:function(a,b){return moment.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(moment(),a)},calendar:function(){var a=this.diff(moment().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-b}):b},month:function(a){var b=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(this._d["set"+b+"Month"](a),moment.updateOffset(this),this):this._d["get"+b+"Month"]()},startOf:function(a){switch(a=normalizeUnits(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+moment(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+moment(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+moment(a).startOf(b)},min:function(a){return a=moment.apply(null,arguments),this>a?this:a},max:function(a){return a=moment.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=timezoneMinutesFromString(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&addOrSubtractDurationFromMoment(this,moment.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return moment.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=weekOfYear(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=weekOfYear(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){var b=(this._d.getDay()+6)%7;return null==a?b:this.add("d",a-b)},lang:function(a){return void 0===a?this._lang:(this._lang=getLangDefinition(a),this)}},i=0;i<proxyGettersAndSetters.length;i++)makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i]);makeGetterAndSetter("year","FullYear"),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.toJSON=moment.fn.toISOString,moment.duration.fn=Duration.prototype={weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*~~(this._months/12)},humanize:function(a){var b=+this,c=relativeTime(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=moment.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this},subtract:function(a,b){var c=moment.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this},get:function(a){return a=normalizeUnits(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=normalizeUnits(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:moment.fn.lang};for(i in unitMillisecondFactors)unitMillisecondFactors.hasOwnProperty(i)&&(makeDurationAsGetter(i,unitMillisecondFactors[i]),makeDurationGetter(i.toLowerCase()));makeDurationAsGetter("Weeks",6048e5),moment.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},moment.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),hasModule&&(module.exports=moment),function(){function loadModuleDirs(dir){var module_dirs=fs.readdirSync(__dirname+"/"+dir);module_dirs=module_dirs.filter(function(a){return!a.match(/\./)});for(var i in module_dirs){var dirname=module_dirs[i];if("function"!=typeof dirname){var parser_files=fs.readdirSync(__dirname+"/"+dir+"/"+dirname);for(var j in parser_files){var filename=parser_files[j];"function"!=typeof filename&&filename.match(/\.js$/)&&eval(fs.readFileSync(__dirname+"/"+dir+"/"+dirname+"/"+filename)+"")}}}}var chrono=function(){for(var a in chrono)this[a]=chrono[a];this.parsers={};for(var b in chrono.parsers)this.parsers[b]=chrono.parsers[b];this.refiners={};for(var c in chrono.refiners)this.refiners[c]=chrono.refiners[c];this.timezoneMap={};for(var c in chrono.timezoneMap)this.timezoneMap[c]=chrono.timezoneMap[c]};if(chrono.timezoneMap={},chrono.parsers={},chrono.refiners={},chrono.parse=function(a,b,c){if(c=c||{},"string"==typeof b){var d=moment(b).zone(b);c.timezoneOffset=d.zone(),b=d.toDate()}var e=this.integratedParse(a,b,c),e=this.integratedRefine(a,e,c);return e},chrono.parseDate=function(a,b,c){var d=this.parse(a,b);return d.length>=1?d[0].start.date(c):null},"undefined"==typeof exports)moment=moment||window.moment,window.chrono=chrono;else{"undefined"==typeof moment&&eval("var moment = require('./moment');");var fs=require("fs");eval(fs.readFileSync(__dirname+"/timezone.js")+""),eval(fs.readFileSync(__dirname+"/parsers/ParseResult.js")+""),eval(fs.readFileSync(__dirname+"/parsers/Parser.js")+""),eval(fs.readFileSync(__dirname+"/parsers/IntegratedParsing.js")+""),loadModuleDirs("parsers"),eval(fs.readFileSync(__dirname+"/refiners/IntegratedRefinement.js")+""),loadModuleDirs("refiners"),module.exports=chrono}}(),function(){if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.timezoneMap={A:60,ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,B:120,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,C:180,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,D:240,DAVT:420,E:300,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,F:360,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,G:420,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,H:480,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,I:540,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:60,JST:540,K:600,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,L:660,LHDT:660,LHST:630,LINT:840,M:720,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,N:-60,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,O:-120,OMSST:420,OMST:420,P:-180,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,Q:-240,R:-300,RET:240,S:-360,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,T:-420,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,U:-480,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,V:-540,VET:-210,VLAST:660,VLAT:660,VUT:660,W:-600,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,X:-660,Y:-720,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360,Z:0}}(),function(){function a(a){this.year=a.year,this.month=a.month,this.day=a.day,this.hour=a.hour,this.minute=a.minute,this.second=a.second,this.timezoneOffset=a.timezoneOffset,this.dayOfWeek=a.dayOfWeek,a.meridiem&&(this.meridiem=a.meridiem.toLowerCase()),a.impliedComponents&&a.impliedComponents.length>0&&(this.impliedComponents=a.impliedComponents),this.isCertain=function(a){return void 0!==this[a]&&null!==this[a]&&(this.impliedComponents?this.impliedComponents.indexOf(a)<0:!0)},this.date=function(a){void 0===a||null===a?a=this.timezoneOffset:this.isCertain("timezoneOffset")&&(a=this.timezoneOffset),(void 0===a||null===a)&&(a=(new Date).getTimezoneOffset());var b=moment(new Date(this.year,this.month,this.day));return b.hours(void 0===this.hour||null===this.hour?12:this.hour),b.minutes(this.minute),b.seconds(this.second),b.add("minutes",a-(new Date).getTimezoneOffset()),b.toDate()},this.assign=function(a,b){if(this[a]=b,this.impliedComponents&&this.impliedComponents.indexOf(a)>=0){var c=this.impliedComponents.indexOf(a);this.impliedComponents.splice(c,1)}},this.imply=function(a,b){this[a]=b,this.impliedComponents||(this.impliedComponents=[]),this.impliedComponents.indexOf(a)<0&&this.impliedComponents.push(a)},this.isCertain("hour")&&this.hour>12&&this.assign("meridiem","pm")}function b(b){this.start=new a(b.start),this.startDate=this.start.date(),b.end&&(this.end=new a(b.end),this.endDate=this.end.date()),this.referenceDate=b.referenceDate,this.index=b.index,this.text=b.text,this.concordance=b.concordance,b.timezoneOffset&&(this.timezoneOffset=b.timezoneOffset)}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.DateComponents=a,chrono.ParseResult=b}(),function(){function a(a,b,c){c=c||{};var d=c.timezoneMap||chrono.timezoneMap,e=0,f=a,g=!1,h=[],i={};return i.pattern=function(){return/./i},i.extract=function(){return null},i.results=function(){return h},i.finished=function(){return g},i.mergeOverlapResult=function(a,b,c){if(c.index<b.index){var d=b;b=c,c=d}var e=b.index+b.text.length,f=c.index;if(e>f&&b.index<c.index&&e<c.index+c.text.length){var g=b.index,h=a.substring(b.index,c.index+c.text.length),i=b.start.impliedComponents||[],j=c.start.impliedComponents||[];if(i.length<j.length){var d=b;b=c,c=d,i=b.start.impliedComponents||[],j=c.start.impliedComponents||[]}if(i.indexOf("day")<0||i.indexOf("month")<0||i.indexOf("year")<0)return;return new chrono.ParseResult({referenceDate:b.ref,index:g,start:c.start,end:c.end,text:h,referenceDate:b.referenceDate})}var k=a.substring(e,f),l=/^\s*(to|\-)\s*$/i;if(!k.match(l))return null;var h=b.text+k+c.text,m=new Object(b.start),n=new Object(c.start),i=b.start.impliedComponents||[],j=c.start.impliedComponents||[];return i.forEach(function(a){n.isCertain(a)&&m.assign(a,n[a])}),j.forEach(function(a){m.isCertain(a)&&n.assign(a,m[a])}),new chrono.ParseResult(moment(n.date()).diff(moment(m.date()))>0?{referenceDate:b.ref,index:b.index,start:m,end:n,text:h,referenceDate:b.referenceDate}:{referenceDate:b.ref,index:b.index,start:n,end:m,text:h,referenceDate:b.referenceDate})},i.extractTime=function(a,b){var c=/^\s*,?\s*(at|from)?\s*,?\s*([0-9]{1,4}|noon|midnight)((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?(\W|$)/i;if(a.length<=b.index+b.text.length)return null;a=a.substr(b.index+b.text.length);var d=a.match(c);if(!d)return null;var e=0,f=0,g=d[2];if("noon"==g.toLowerCase()?(b.start.meridiem="pm",g=12):"midnight"==g.toLowerCase()?(b.start.meridiem="am",g=0):g=parseInt(g),d[5]){if(e=d[5],e=parseInt(e),e>=60)return null}else g>100&&(e=g%100,g=(g-e)/100);if(d[8]&&(f=d[8],f=parseInt(f),f>=60))return null;if(d[10]){if(g>12)return null;"am"==d[10].toLowerCase()&&12==g&&(g=0),"pm"==d[10].toLowerCase()&&12!=g&&(g+=12),b.start.meridiem=d[10].toLowerCase()}if(g>=12&&(b.start.meridiem="pm"),g>24)return null;b.text=b.text+d[0].substr(0,d[0].length-d[11].length),void 0==b.start.hour&&(b.start.hour=g,b.start.minute=e,b.start.second=f);var h=/^\s*(\-|\~|\〜|to|\?)\s*([0-9]{1,4})((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?/i;if(a=a.substr(d[0].length-d[11].length),d=a.match(h),!d)return b.end&&void 0==b.end.hour&&(b.end.hour=g,b.end.minute=e,b.end.second=f),new chrono.ParseResult(b);var e=0,f=0,g=d[2];if(g=parseInt(g),d[5]){if(e=d[5],e=parseInt(e),e>=60)return null}else if(g>100){if(!d[10])return null;e=g%100,g=(g-e)/100}if(d[8]&&(f=d[8],f=parseInt(f),f>=60))return null;if(d[10]){if(g>12)return null;"am"==d[10].toLowerCase()&&12==g&&(g=0,b.end||(b.end=new chrono.DateComponents(b.start)),b.end.day+=1),"pm"==d[10].toLowerCase()&&12!=g&&(g+=12),b.start.meridiem||("am"==d[10].toLowerCase()&&12==b.start.hour&&(b.start.hour=0),"pm"==d[10].toLowerCase()&&12!=b.start.hour&&(b.start.hour+=12),b.start.imply("meridiem",d[10].toLowerCase()))}return b.text=b.text+d[0],b.end?(b.end.hour=g,b.end.minute=e,b.end.second=f):(b.end=new chrono.DateComponents(b.start),b.end.hour=g,b.end.minute=e,b.end.second=f),d[10]&&(b.end.meridiem=d[10].toLowerCase()),g>=12&&(b.end.meridiem="pm"),new chrono.ParseResult(b)},i.extractTimezone=function(a,b){var c=/^\s*(GMT|UTC)?(\+|\-)(\d{1,2}):?(\d{2})/;if(a.length<=b.index+b.text.length)return null;a=a.substr(b.index+b.text.length);var e=a.match(c);if(e){var f=60*parseInt(e[3])+parseInt(e[4]),f=-1*parseInt(e[2]+f);b.end&&(b.end.timezoneOffset=f),b.start.timezoneOffset=f,b.text+=e[0],a=a.substr(e[0].length)}var c=/^\s*\(?([A-Z]{1,4})\)?(\W|$)/,e=a.match(c);if(e&&void 0!==d[e[1]]){var g=e[1],f=-d[g];void 0===b.start.timezoneOffset&&(b.start.timezoneOffset=f,b.end&&(b.end.timezoneOffset=f)),b.text+=e[0].substring(0,e[0].length-e[2].length)}return b},i.extractConcordance=function(a,b){var c=30;return preText=a.substr(0,b.index),preText=preText.replace(/(\r\n|\n|\r)/gm," "),preText=preText.replace(/(\s+)/gm," "),preText=preText.length>c?"..."+preText.substr(preText.length-c+3,c-3):preText.substr(0,c),posText=a.substr(b.index+b.text.length),posText=posText.replace(/(\r\n|\n|\r)/gm," "),posText=posText.replace(/(\s+)/gm," "),posText=posText.length>c?posText.substr(0,c-3)+"...":posText.substr(0,c),b.concordance=preText+b.text+posText,new chrono.ParseResult(b)},i.exec=function(){if(g)return null;var b=f.search(this.pattern());if(0>b)return g=!0,null;var d=b+e,i=this.extract(a,d);if(!i)return f=f.substr(b+1),e=d+1,null;if(void 0===i.start.hour||i.end&&void 0===i.end.hour){var j=this.extractTime(a,i);i=j||i}if(void 0===i.start.timezoneOffset||i.end&&void 0===i.end.timezoneOffset){var k=this.extractTimezone(a,i);i=k||i,c.timezoneOffset&&(void 0===i.start.timezoneOffset&&i.start.imply("timezoneOffset",c.timezoneOffset),i.end&&void 0===i.end.timezoneOffset&&i.end.imply("timezoneOffset",c.timezoneOffset))}if(h.length>0){var l=h[h.length-1],m=this.mergeOverlapResult(a,l,i);i=m||i}return this.extractConcordance(a,i),h.push(i),f=a.substr(i.index+i.text.length+1),e=i.index+i.text.length+1,i},i.execAll=function(){for(;!this.finished();)this.exec()},i}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.Parser=a}(),function(){function a(a,c,d,e){d=d||{},c=c||new Date,e=e||Object.keys(this.parsers),d.timezoneMap=d.timezoneMap||this.timezoneMap;for(var f=0,g=[],h=[],i=0;i<e.length;i++)this.parsers[e[i]]&&g.push(new this.parsers[e[i]](a,c,d));for(;f<g.length;){for(var j=g[f];!j.finished();){var k=j.exec();k&&b(h,k)}f++}return h}function b(a,b){for(var c=0;c<a.length&&a[c].index<b.index;)c++;if(c<a.length){for(var d=c;d<a.length&&a[d].index<b.index+b.text.length;){if(a[d].text.length>=b.text.length)return a;d++}a.splice(c,d-c)}if(c-1>=0){var e=a[c-1];if(b.index<e.index+e.text.length){if(e.text.length>=b.text.length)return a;a.splice(c-1,1),c-=1}}return a.splice(c,0,b),a}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.integratedParse=a}(),function(){function a(a,c,d){d=d||{},c=c||new Date;var e=chrono.Parser(a,c,d);return e.pattern=function(){return b},e.extract=function(a,d){var e=a.substr(d).match(b);if(null==e)return void(finished=!0);var a=e[0];a=e[0].substr(0,e[0].length-e[4].length);var f=parseInt(e[1]),g=parseInt(e[2])-1,h=parseInt(e[3]);100>h&&(h+=h>50?1900:2e3);var i=moment([h,g,f]);return i.date()!=f||i.month()!=g||i.year()!=h?(console.log("out"),null):new chrono.ParseResult({referenceDate:c,text:a,index:d,start:{day:i.date(),month:i.month(),year:i.year(),dayOfWeek:i.day()}})},e}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/([0-9]{1,2})\.([0-9]{1,2})\.([0-9]{4}|[0-9]{2})(\W|$)/i;chrono.parsers.DEAllNumericFormParser=a}(),function(){function a(a,e,f){f=f||{},e=e||new Date;var g=chrono.Parser(a,e,f);return g.pattern=function(){return b},g.extract=function(a,f){var g=this.results(),h=g[g.length-1];if(h&&f<h.index+h.text.length)return null;var i=a.substr(f).match(b);if(null==i)return void(finished=!0);var a=i[0];f+=i[1].length,a=i[0].substr(i[1].length,i[0].length-i[9].length-i[1].length);var j=i[5],k=i[6];k=k.toLowerCase();var l=c[k];if(void 0===l)return null;var m=moment(e).clone();if(j)console.log(j),j=j.toLowerCase(),d(j,"letzte")?m.day(l-7):d(j,"nächste")?m.day(l+7):d(j,"diese")&&m.day(l);else{var n=m.day();m.day(l>n?l:l+7)}return new chrono.ParseResult({referenceDate:e,text:a,index:f,start:{day:m.date(),month:m.month(),year:m.year(),dayOfWeek:l,impliedComponents:["day","month","year"]}})},g}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/(\W|^)((\,|\(|\（)\s*)?((diese[rn]?|letzte[rn]?|nächste[rn]?)\s*)?(Sonntag|So|Montag|Mo|Dienstag|Di|Mittwoch|Mi|Donnerstag|Do|Freitag|Fr|Samstag|Sonnabend|Sa)(\s*(\,|\)|\）))?(\W|$)/i,c={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,"do":4,freitag:5,fr:5,samstag:6,sonnabend:6,sa:6},d=function(a,b){return 0===a.lastIndexOf(b,0)};chrono.parsers.DEDayOfWeekParser=a}(),function(){function a(a,e,f){f=f||{},e=e||new Date;var g=chrono.Parser(a,e,f);return g.pattern=function(){return d},g.extract=function(a,f){var g=[],h=null,i=null;a=a.substr(f);var j=a,k=a,l=a.match(d);a=l[0],a=l[0].substr(l[1].length,l[0].length-l[15].length-l[1].length),f+=l[1].length;var k=k.substr(l[1].length+a.length),j=a;l[6]&&(a=a.replace(l[6],"")),l[7]&&(a=a.replace(l[7],""));var m=null;l[12]&&(m=l[13],m=parseInt(m),100>m?null!=k.match(/\s*(:|am|pm)/i)?(a=a.replace(l[12],""),j=j.replace(l[12],""),m=null):m>20?m=null:m+=2e3:l[14]&&(a=a.replace(l[14],""),m-=543));var n=parseInt(l[5]),o=c[l[11].toLowerCase()];if(m){if(h=moment([m,o,n]),!h)return null}else{if(g.push("year"),h=moment([moment(e).year(),o,n]),!h)return null;var p=h.clone().add("y",1),q=h.clone().add("y",-1);Math.abs(p.diff(moment(e)))<Math.abs(h.diff(moment(e)))?h=p:Math.abs(q.diff(moment(e)))<Math.abs(h.diff(moment(e)))&&(h=q)}if(l[3]&&(i=b[l[3].toLowerCase()]),l[9]){var r=parseInt(l[9]),s=parseInt(l[5]),t=h.clone();return h.date(s),t.date(r),h.format("D")!=l[5]?null:t.format("D")!=l[9]?null:new chrono.ParseResult({referenceDate:e,text:j,index:f,start:{day:h.date(),month:h.month(),year:h.year(),dayOfWeek:i,impliedComponents:g},end:{day:t.date(),month:t.month(),year:t.year(),impliedComponents:g}})}return h.format("D")!=l[5]?null:new chrono.ParseResult({referenceDate:e,text:j,index:f,start:{day:h.date(),month:h.month(),year:h.year(),dayOfWeek:i,impliedComponents:g}})},g}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b={sonntag:0,montag:1,dienstag:2,mittwoch:3,donnerstag:4,freitag:5,samstag:6,so:0,mo:1,di:2,mi:3,"do":4,fr:5,sa:6},c={januar:0,februar:1,märz:2,april:3,mai:4,juni:5,juli:6,august:7,september:8,oktober:9,november:10,dezember:11,jan:0,feb:1,mrz:2,apr:3,jun:5,jul:6,aug:7,sep:8,okt:9,nov:10,dez:11},d=/(\W|^)((Sonntag|Montag|Dienstag|Mittwoch|Donnerstag|Freitag|Samstag|So|Mo|Di|Mi|Do|Fr|Sa)\s*,?\s*)?(den)?\s*([0-9]{1,2})(\.)?(\s*(to|\-|\s)\s*([0-9]{1,2})(\.)?)?\s*(Januar|Februar|März|April|Mai|Juni|Juli|August|September|Oktober|November|Dezember|Jan|Feb|Mrz|Apr|Mai|Jun|Jul|Aug|Sep|Okt|Nov|Dez)((\s*[0-9]{2,4})(\s*BE)?)?(\W|$)/i;chrono.parsers.DEMonthNameLittleEndianParser=a}(),function(){function a(a,b,c){var d=/(\W|^)(the\s*)?([0-9]{1,2})(th|rd|nd|st)(\W|$)/i;c=c||{},b=b||new Date;var e=chrono.Parser(a,b,c);return e.pattern=function(){return d},e.extract=function(a,c){var e=a.substr(c).match(d);if(0!=a.substr(c-1).search(d)){if(null==e)return void(finished=!0);var a=e[0];a=e[0].substr(e[1].length,e[0].length-e[1].length-e[5].length),c+=e[1].length;var f=e[3];f=parseInt(f);var g=moment(b);if(g.date(f),!(f>31||g.date()!=f))return new chrono.ParseResult({referenceDate:b,text:a,index:c,start:{day:g.date(),month:g.month(),year:g.year(),impliedComponents:["month","year"]}})}},e}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.parsers.DateOnlyParser=a}(),function(){function a(a,d,e){e=e||{},d=d||new Date;var f=chrono.Parser(a,d,e);return f.pattern=function(){return b},f.extract=function(a,e){var f=this.results(),g=f[f.length-1];if(g&&e<g.index+g.text.length)return null;var h=a.substr(e).match(b);if(null==h)return void(finished=!0);var a=h[0];e+=h[1].length,a=h[0].substr(h[1].length,h[0].length-h[9].length-h[1].length);var i=h[5],j=h[6];j=j.toLowerCase();var k=c[j];if(void 0===k)return null;var l=moment(d).clone();if(i)i=i.toLowerCase(),"last"==i?l.day(k-7):"next"==i?l.day(k+7):"this"==i&&l.day(k);else{var m=l.day();l.day(k>m?k:k+7)}return new chrono.ParseResult({referenceDate:d,text:a,index:e,start:{day:l.date(),month:l.month(),year:l.year(),dayOfWeek:k,impliedComponents:["day","month","year"]}})},f}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/(\W|^)((\,|\(|\（)\s*)?((this|last|next)\s*)?(Sunday|Sun|Monday|Mon|Tuesday|Wednesday|Wed|Thursday|Thurs|Thur|Friday|Fri|Saturday|Sat)(\s*(\,|\)|\）))?(\W|$)/i,c={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thurs:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6};chrono.parsers.DayOfWeekParser=a}(),function(){function a(a,c,d){d=d||{},c=c||new Date;var e=chrono.Parser(a,c,d);return e.pattern=function(){return b},e.extract=function(a,f){var g=a.substr(f).match(b);if(null==g)return void(finished=!0);var h=null,i=g[0].toLowerCase();i=g[0].substr(0,g[0].length-g[12].length);var j=moment(c);void 0!==d.timezoneOffset&&(j=j.zone(d.timezoneOffset));var k=null,l=i.toLowerCase();if("today"==l||"tonight"==l)k=j.clone();else if("tomorrow"==l)k=j.hour()<4?j.clone().hour(6):j.clone().add("d",1);else if("yesterday"==l)k=j.clone().add("d",-1);else if(l.match("last"))k=j.clone().add("d",-1);else if(l.match("ago")){var m=g[2];m=parseInt(m),k=j.clone().add("d",-m)}else{if(a.charAt(f-1).match(/\d/))return null;if(a.match(/\d+(\.\d+)%/))return null;for(;" "==a.charAt(f);)f++;h=["year","month","day"],k=j.clone(),i=""}var n=new chrono.ParseResult({referenceDate:j.toDate(),text:i,index:f,start:{day:k.date(),month:k.month(),year:k.year(),impliedComponents:h}}),o=e.extractTime(a,n);return n=o||n,0==n.text.replace(/\s/g,"").length?null:(l.match("night")&&(o?o.start.hour<6?(k.add("d",1),n.start.day=k.date(),n.start.month=k.month(),n.start.year=k.year(),n=new chrono.ParseResult(n)):o.start.hour<12&&!o.start.meridiem&&(n.start.hour=o.start.hour+12,n.start.meridiem="pm",n.start.impliedComponents=n.start.impliedComponents||[],n.start.impliedComponents.push("meridiem"),n=new chrono.ParseResult(n)):(n.start.day=k.date()+1,n.start.hour=0,n.start.minute=0,n.start.second=0,n.start.impliedComponents=["hour","minute","second"],n=new chrono.ParseResult(n))),n)},e}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/(today|tonight|tomorrow|yesterday|last\s*night|([0-9]+)\s*day(s)\s*ago|([0-9]{1,2})(\.|\:|\：)([0-9]{2})|([0-9]{1,2}\s*\W?\s*)?([0-9]{1,2})\s*(AM|PM)|at\s*([0-9]{1,2}|noon|midnight)|(noon|midnight))(\W|$)/i;chrono.parsers.GeneralDateParser=a}(),function(){function a(a,c,d){d=d||{},c=c||new Date;var e=chrono.Parser(a,c,d);return e.pattern=function(){return b},e.extract=function(a,d){var e=a.substr(d).match(b);if(null==e)return void(finished=!0);var a=e[0];a=e[0].substr(0,e[0].length-e[4].length);var f=moment(a,"YYYY-MM-DD");
return f.format("YYYY-M-D")!=a&&f.format("YYYY-MM-DD")!=a?null:new chrono.ParseResult({referenceDate:c,text:a,index:d,start:{day:f.date(),month:f.month(),year:f.year(),dayOfWeek:f.day()}})},e}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2})(\W|$)/i;chrono.parsers.InternationalStandardParser=a}(),function(){function a(a,d,e){e=e||{},d=d||new Date;var f=chrono.Parser(a,d,e);f.pattern=function(){return c},f.extract=function(a,e){var f=[],g=null,h=null;a=a.substr(e);var i=a,j=a,k=a.match(c);a=k[0],a=k[0].substr(k[1].length,k[0].length-k[14].length-k[1].length),e+=k[1].length;var j=j.substr(k[1].length+a.length),i=a;k[5]&&(a=a.replace(k[5],"")),k[6]&&(a=a.replace(k[6],""));var l=null;if(k[11]&&(l=k[12],l=parseInt(l),100>l?null!=j.match(/\s*(:|am|pm)/i)?(a=a.replace(k[11],""),i=i.replace(k[11],""),l=null):l>20?l=null:l+=2e3:k[13]&&(a=a.replace(k[13],""),l-=543)),l){if(a=k[4]+" "+k[10]+" "+l,g=moment(a,"DD MMMM YYYY"),!g)return null}else{if(a=k[4]+" "+k[10],g=moment(a,"DD MMMM"),!g)return null;f.push("year"),g.year(moment(d).year());var m=g.clone().add("y",1),n=g.clone().add("y",-1);Math.abs(m.diff(moment(d)))<Math.abs(g.diff(moment(d)))?g=m:Math.abs(n.diff(moment(d)))<Math.abs(g.diff(moment(d)))&&(g=n)}if(k[3]&&(h=b[k[3].toLowerCase()]),k[8]){var o=parseInt(k[8]),p=parseInt(k[4]),q=g.clone();return g.date(p),q.date(o),g.format("D")!=k[4]?null:q.format("D")!=k[8]?null:new chrono.ParseResult({referenceDate:d,text:i,index:e,start:{day:g.date(),month:g.month(),year:g.year(),dayOfWeek:h,impliedComponents:f},end:{day:q.date(),month:q.month(),year:q.year(),impliedComponents:f}})}return g.format("D")!=k[4]?null:new chrono.ParseResult({referenceDate:d,text:i,index:e,start:{day:g.date(),month:g.month(),year:g.year(),dayOfWeek:h,impliedComponents:f}})};var g=f.extractTime;return f.extractTime=function(a,b){var c=/(\,|\(|\s)*(Sun|Sunday|Mon|Monday|Tue|Tuesday|Wed|Wednesday|Thur|Thursday|Fri|Friday|Sat|Saturday)(\,|\)|\s)*/i;if(a.length<=b.index+b.text.length)return null;var d=a.substr(b.index+b.text.length),e=d.match(c);return e&&0==d.indexOf(e[0])&&(b.text=b.text+e[0]),g.call(this,a,b)},f}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6},c=/(\W|^)((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?([0-9]{1,2})(st|nd|rd|th)?(\s*(to|\-|\s)\s*([0-9]{1,2})(st|nd|rd|th)?)?\s*(January|Jan|February|Feb|March|Mar|April|Apr|May|June|Jun|July|Jul|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec)((\s*[0-9]{2,4})(\s*BE)?)?(\W|$)/i;chrono.parsers.MonthNameLittleEndianParser=a}(),function(){function a(a,e,f){f=f||{},e=e||new Date;var g=chrono.Parser(a,e,f);g.pattern=function(){return d},g.extract=function(a,f){var g=[],h=null,i=null,j="";a=a.substr(f);var k=a.match(c);if(k&&0==a.indexOf(k[0])){var a=k[0];if(a=a.substring(k[1].length,k[0].length-k[14].length),f+=k[1].length,j=a,a=a.replace(k[2],""),a=a.replace(k[4],k[4]+" "),k[5]&&(a=a.replace(k[5],"")),k[10]&&(a=a.replace(k[10],"")),k[11]&&(a=a.replace(","," ")),k[13]){var l=k[12];l=" "+(parseInt(l)-543),a=a.replace(k[13],""),a=a.replace(k[12],l)}if(a=a.replace(k[9],parseInt(k[9])+""),h=moment(a,"MMMM DD YYYY"),!h)return null}else{if(k=a.match(d),!k)return null;var a=k[0];if(a=a.substring(k[1].length,k[0].length-k[11].length),f+=k[1].length,j=a,a=a.replace(k[2],""),a=a.replace(k[4],k[4]+" "),k[4]&&(a=a.replace(k[5],"")),h=moment(a,"MMMM DD"),!h)return null;g.push("year"),h.year(moment(e).year());var m=h.clone().add("y",1),n=h.clone().add("y",-1);Math.abs(m.diff(moment(e)))<Math.abs(h.diff(moment(e)))?h=m:Math.abs(n.diff(moment(e)))<Math.abs(h.diff(moment(e)))&&(h=n)}if(k[3]&&(i=b[k[3].toLowerCase()]),k[5]){var o=parseInt(k[9]),p=parseInt(k[6]),q=h.clone();return h.date(p),q.date(o),h.format("D")!=k[6]?null:q.format("D")!=k[9]?null:new chrono.ParseResult({referenceDate:e,text:j,index:f,start:{day:h.date(),month:h.month(),year:h.year(),dayOfWeek:i,impliedComponents:g},end:{day:q.date(),month:q.month(),year:q.year(),impliedComponents:g}})}return h.format("D")!=parseInt(k[9])+""?null:new chrono.ParseResult({referenceDate:e,text:j,index:f,start:{day:h.date(),month:h.month(),year:h.year(),dayOfWeek:i,impliedComponents:g}})};var h=g.extractTime;return g.extractTime=function(a,c){var d=/(\,|\(|\s)*(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)(\,|\)|\s)*/i;if(a.length<=c.index+c.text.length)return null;var e=a.substr(c.index+c.text.length,15),f=e.match(d);if(f&&0==e.indexOf(f[0])){c.text=c.text+f[0];var g=b[f[2].toLowerCase()];c.start.dayOfWeek=g}if(!c.start.impliedComponents||c.start.impliedComponents.indexOf("year")<0)return h.call(this,a,c);var i=/(\s*[0-9]{4})(\s*BE)?/i;if(a.length<=c.index+c.text.length)return null;var e=a.substr(c.index+c.text.length,15),f=e.match(i);if(f&&0==e.indexOf(f[0])){var j=f[1];j=parseInt(j),100>j?j>20?j=null:j+=2e3:f[2]&&(j-=543);var k=c.start.impliedComponents.indexOf("year");c.start.impliedComponents.splice(k,1),c.start.year=j,c.text=c.text+f[0]}return h.call(this,a,c)},g}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6},c=/(\W|^)((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?(,)?(\s*[0-9]{4})(\s*BE)?(\W|$)/i,d=/(\W|^)((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?([^0-9]|$)/i;chrono.parsers.MonthNameMiddleEndianParser=a}(),function(){function a(a,d,e){e=e||{},d=d||new Date;var f=chrono.Parser(a,d,e);return f.pattern=function(){return c},f.extract=function(a,e){var f=a.substr(e).match(c);if(null!=f&&"/"!=f[1]&&"/"!=f[7]){var a=f[0].substr(f[1].length,f[0].length-f[7].length),g=a;if(!a.match(/^\d.\d$/)&&(e+=f[1].length,f[6]||!(f[0].indexOf("/")<0))){var h=null,i=f[6]||moment(d).year()+"",j=f[3],k=f[4],l=null;return f[2]&&(l=b[f[2].toLowerCase()]),j=parseInt(j),k=parseInt(k),i=parseInt(i),1>j||j>12?null:1>k||k>31?null:(100>i&&(i>50?i=i+2500-543:i+=2e3),a=j+"/"+k+"/"+i,h=moment(a,"M/D/YYYY"),h&&h.date()==k||(h=moment(a,"D/M/YYYY"),h&&h.date()==j)?new chrono.ParseResult({referenceDate:d,text:g,index:e,start:{day:h.date(),month:h.month(),year:h.year(),dayOfWeek:l}}):null)}}},f}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b={sunday:0,sun:0,monday:1,mon:1,tuesday:2,wednesday:3,wed:3,thursday:4,thur:4,friday:5,fri:5,saturday:6,sat:6},c=/(\W|^)(Sun|Sunday|Mon|Monday|Tue|Tuesday|Wed|Wednesday|Thur|Thursday|Fri|Friday|Sat|Saturday)?\s*\,?\s*([0-9]{1,2})[\/\.]([0-9]{1,2})([\/\.]([0-9]{4}|[0-9]{2}))?(\W|$)/i;chrono.parsers.SlashParser=a}(),function(){function a(a,d,e){e=e||{},d=d||new Date;var f=chrono.parsers.THGeneralDateParser(a,d,e);return f.pattern=function(){return b},f.extract=function(a,e){var f=this.results(),g=f[f.length-1];if(g&&e<g.index+g.text.length)return null;var h=a.substr(e).match(b);if(null!=h){var a=h[0],i=h[2];i=i.toLowerCase();var j=c[i];if(void 0===j)return null;var k=moment(d).clone(),l=h[3];return"นี้"==l?k.day(j):"หน้า"==l?k.day(j+7):"ที่แล้ว"==l?k.day(j-7):(k.day(j),a=h[0].substr(0,h[0].length-h[3].length)),new chrono.ParseResult({referenceDate:d,text:a,index:e,start:{day:k.date(),month:k.month(),year:k.year()}})}},f}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/(วัน)?(อาทิตย์|จันทร์|อังคาร|พุธ|พฤหัสบดี|ศุกร์|เสาร์)(หน้า|นี้|ที่แล้ว|.|$)/i,c={อาทิตย์:0,จันทร์:1,อังคาร:2,พุธ:3,พฤหัสบดี:4,ศุกร์:5,เสาร์:6};chrono.parsers.THDayOfWeekParser=a}(),function(){function a(a,c,d){d=d||{},c=c||new Date;var e=chrono.Parser(a,c,d);return e.pattern=function(){return b},e.extract=function(a,d){var f=this.results(),g=f[f.length-1];if(g&&d<g.index+g.text.length)return null;var h=a.substr(d).match(b);if(null==h)return void(finished=!0);var i=h[0].toLowerCase();i=h[0].substr(0,h[0].length-h[5].length);var j=null;if("วันนี้"==i)j=moment(c).clone();else if("พรุ่งนี้"==i)j=moment(c).clone().add("d",1);else if("เมื่อวาน"==i)j=moment(c).clone().add("d",-1);else if("เมื่อคืน"==i)j=moment(c).clone().add("d",-1);else{var k=h[2];k=parseInt(k),j=moment(c).clone().add("d",-k)}var l=new chrono.ParseResult({referenceDate:c,text:i,index:d,start:{day:j.date(),month:j.month(),year:j.year()}}),m=e.extractTime(a,l);return l=m||l,i.match("คืน")&&(m?m.start.hour<12&&(j.add("d",1),l.start.day=j.date(),l.start.month=j.month(),l.start.year=j.year(),l=new chrono.ParseResult(l)):(l.start.day=j.date()+1,l.start.hour=0,l.start.minute=0,l.start.second=0,l=new chrono.ParseResult(l))),l},e}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/(วันนี้|พรุ่งนี้|เมื่อวาน|เมื่อคืน|([1-9]+)\s*(วัน|คืน)(ก่อน|ที่แล้ว))(\W|$)/i;chrono.parsers.THGeneralDateParser=a}(),function(){function a(a,e,f){f=f||{},e=e||new Date;var g=chrono.parsers.THGeneralDateParser(a,e,f);return g.pattern=function(){return c},g.extract=function(a,f){var g=this.results(),h=g[g.length-1];if(h&&f<h.index+h.text.length)return null;var i=null;a=a.substr(f),originalText=a;var j=a.match(b);if(j&&0==a.indexOf(j[0])){a=j[0],a=j[0].substr(0,j[0].length-j[8].length),originalText=a;var k=j[7];k=parseInt(k),j[3]&&"ค.ศ."==j[3]?30>=k?k+=2e3:100>k&&(k+=1900):(543>k&&(k+=2500),k-=543);var l=d[j[5]];if("number"!=typeof l)return null;var m=j[1];m=parseInt(m);var n=k+"-"+(l+1)+"-"+m,i=moment(n,"YYYY-MM-DD");if(i.format("YYYY-M-D")!=n)return null}else{if(j=a.match(c),!j)return null;var a=j[0];a=j[0].substr(0,j[0].length-j[6].length),originalText=a;var l=d[j[5]];if("number"!=typeof l)return null;var m=j[1];m=parseInt(m);var n=l+1+"-"+m,i=moment(n,"MM-DD");if(i.format("M-D")!=n)return null;i.year(moment(e).year());var o=i.clone().add("y",1),p=i.clone().add("y",-1);Math.abs(o.diff(moment(e)))<Math.abs(i.diff(moment(e)))?i=o:Math.abs(p.diff(moment(e)))<Math.abs(i.diff(moment(e)))&&(i=p)}if(j[4]){var q=parseInt(j[4]),r=parseInt(j[1]),s=i.clone();return i.date(r),s.date(q),i.format("D")!=j[1]?null:s.format("D")!=j[4]?null:new chrono.ParseResult({referenceDate:e,text:originalText,index:f,start:{day:i.date(),month:i.month(),year:i.year()},end:{day:s.date(),month:s.month(),year:s.year()}})}return new chrono.ParseResult({referenceDate:e,text:originalText,index:f,start:{day:i.date(),month:i.month(),year:i.year()}})},g}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/([0-9]{1,2})(\s*(ถึง|\-)?\s*([0-9]{1,2}))?\s+(มกราคม|ม.ค.|กุมภาพัน|ก.พ.|มีนาคม|มี.ค.|เมษายน|เม.ย.|พฤษภาคม|พ.ค.|มิถุนายน|ม.ย.|มิ.ย.|กรกฎาคม|ก.ค.|สิงหาคม|ส.ค.|กันยายน|ก.ย.|ตุลาคม|ต.ค.|พฤศจิกายน|พ.ย.|ธันวาคม|ธ.ค.)(พ.ศ.|ค.ศ.)?(\s+[0-9]{2,4})(\W|$)/i,c=/([0-9]{1,2})(\s*(ถึง|\-)?\s*([0-9]{1,2}))?\s+(มกราคม|ม.ค.|กุมภาพัน|ก.พ.|มีนาคม|มี.ค.|เมษายน|เม.ย.|พฤษภาคม|พ.ค.|มิถุนายน|ม.ย.|มิ.ย.|กรกฏาคม|ก.ค.|สิงหาคม|ส.ค.|กันยายน|ก.ย.|ตุลาคม|ต.ค.|พฤศจิกายน|พ.ย.|ธันวาคม|ธ.ค.)(\W|$)/i,d={มกราคม:0,"ม.ค.":0,กุมภาพัน:1,"ก.พ.":1,มีนาคม:2,"มี.ค.":2,เมษายน:3,"เม.ย.":4,พฤษภาคม:4,"พ.ค.":4,มิถุนายน:5,"มิ.ย.":5,กรกฎาคม:6,"ก.ค.":6,สิงหาคม:7,"ส.ค.":7,กันยายน:8,"ก.ย.":8,ตุลาคม:9,"ต.ค.":9,พฤศจิกายน:10,"พ.ย.":10,ธันวาคม:11,"ธ.ค.":11};chrono.parsers.THMonthNameLittleEndianParser=a}(),function(){function a(a,c,d){d=d||{},c=c||new Date;var e=chrono.Parser(a,c,d);e.pattern=function(){return b},e.extract=function(a,d){var f=this.results(),g=f[f.length-1];if(g&&d<g.index+g.text.length)return null;var h=a.substr(d).match(b);if(null==h)return void(finished=!0);var i=h[0].toLowerCase();i=h[0].substr(0,h[0].length-h[3].length);var j=null;if("今日"==i)j=moment(c).clone();else if("明日"==i)j=moment(c).clone().add("d",1);else if("昨日"==i)j=moment(c).clone().add("d",-1);else{var k=h[2];k=parseInt(k),j=moment(c).clone().add("d",-k)}var l=new chrono.ParseResult({referenceDate:c,text:i,index:d,start:{day:j.date(),month:j.month(),year:j.year()}}),m=e.extractTime(a,l);return l=m||l};var f=e.extractTime;return e.extractTime=function(a,b){var c=f.call(this,a,b);if(c)return c;var d=/\s*(午前|午後)?\s*([0-9]{1,2})時?(([0-9]{1,2})分)?/i;if(a.length<=b.index+b.text.length)return null;a=a.substr(b.index+b.text.length);var e=a.match(d);if(!e||0!=a.indexOf(e[0]))return null;var g=0,h=0,i=e[2];if(i=parseInt(i),e[1]){if(i>12)return null;"午後"==e[1]&&(i+=12)}return e[4]&&(g=e[4],g=parseInt(g),g>=60)?null:(b.text=b.text+e[0],void 0==b.start.hour&&(b.start.hour=i,b.start.minute=g,b.start.second=h),b.end&&void 0==b.end.hour&&(b.end.hour=i,b.end.minute=g,b.end.second=h),new chrono.ParseResult(b))},e}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var b=/(今日|昨日|明日|([1-9]+)\s*日前)(\W|$)/i;chrono.parsers.JPGeneralDateParser=a}(),function(){function a(a){var b=a;return b=b.replace(/０/g,"0"),b=b.replace(/１/g,"1"),b=b.replace(/２/g,"2"),b=b.replace(/３/g,"3"),b=b.replace(/４/g,"4"),b=b.replace(/５/g,"5"),b=b.replace(/６/g,"6"),b=b.replace(/７/g,"7"),b=b.replace(/８/g,"8"),b=b.replace(/９/g,"9")}function b(b,d,e){e=e||{},d=d||new Date;var f=chrono.parsers.JPGeneralDateParser(b,d,e);f.pattern=function(){return c},f.extract=function(b,e){var g=this.results(),h=g[g.length-1];if(h&&e<h.index+h.text.length)return null;var i=b.substr(e).match(c);if(null==i)return void(finished=!0);var j=i[0].toLowerCase(),k=null;j=i[0];var l=i[6];if(l=a(l),l=parseInt(l),!l||0/0==l)return null;var m=i[7];if(m=a(m),m=parseInt(m),!m||0/0==m)return null;var n=i[5];if(n&&(n=a(n),n=parseInt(n)),n&&0/0!==n){"平成"==i[4]?n+=1989:100>n&&(n+=2e3);var o=n+"-"+l+"-"+m;if(k=moment(o,"YYYY-MM-DD"),k.format("YYYY-M-D")!=o)return null}else{var o=l+"-"+m;k=moment(o,"MM-DD"),k.year(moment(d).year());var p=k.clone().add("y",1),q=k.clone().add("y",-1);Math.abs(p.diff(moment(d)))<Math.abs(k.diff(moment(d)))?k=p:Math.abs(q.diff(moment(d)))<Math.abs(k.diff(moment(d)))&&(k=q)}var r=new chrono.ParseResult({referenceDate:d,text:j,index:e,start:{day:k.date(),month:k.month(),year:k.year()}}),s=f.extractTime(b,r);return r=s||r};var g=f.extractTime;return f.extractTime=function(a,b){var c=/(\,|\(|（|\s)*(月|火|水|木|金|土|日)(曜日|曜)?\s*(\,|）|\))/i;if(a.length<=b.index+b.text.length)return null;var d=a.substr(b.index+b.text.length),e=d.match(c);return e&&0==d.indexOf(e[0])&&(b.text=b.text+e[0]),g.call(this,a,b)},f}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";var c=/((同|((平成)?([0-9０-９]{2,4})))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i;chrono.parsers.JPStandardDateParser=b}(),function(){function a(a,b,c){var d={};for(var e in this.refiners){var f=this.refiners[e],g=f.order||0;d[g]=d[g]||[],d[g].push(f)}for(var g in d)d[g].forEach(function(d){b=d.refine(a,b,c)});return b}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.integratedRefine=a}(),function(){function a(a,b){if(b.length<2)return b;for(var c=[],d=0;d<b.length-1;d++){var e=b[d+1],f=b[d],g=a.substring(f.index+f.text.length,e.index),h=/^\s*(of|on|\W)?\s*$/i;if(g.match(h)){if(void 0===f.start.hour){if(void 0===e.start.hour){c.push(f);continue}var i=new Object(f.start),j=new Object(e.start)}else{if(void 0!==e.start.hour){c.push(f);continue}var j=new Object(f.start),i=new Object(e.start)}i.hour=j.hour,i.minute=j.minute,i.second=j.second,i.meridiem=j.meridiem,i.impliedComponents=i.impliedComponents||[],f.start=new chrono.DateComponents(i),(f.end||e.end)&&(void 0!==f.start.hour?(j=f.end||j,i=e.end||i):(i=f.end||i,j=e.end||j),i.hour=j.hour,i.minute=j.minute,i.second=j.second,i.impliedComponents=i.impliedComponents||[],f.end=new chrono.DateComponents(i)),f.text=f.text+g+e.text,c.push(new chrono.ParseResult(f)),d++}else c.push(f)}return d<b.length&&c.push(b[d]),c}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.refiners.MergeComponentsRefine={refine:a}}(),function(){function a(a,b){if(b.length<2)return b;for(var c=0;c<b.length;c++){var d=null,e=b[c];if(b[c+1])if(b[c-1]){var f=b[c+1],g=f.index-(e.index+e.text.length),h=b[c-1],i=e.index-(h.index+h.text.length);d=i>g?f:h}else d=b[c+1];else d=b[c-1];{var j=e.start.impliedComponents||[];d.start.impliedComponents||[]}if(void 0===e.start.hour&&j.push("hour"),void 0===e.start.minute&&j.push("minute"),j.forEach(function(a){d.start.isCertain(a)&&e.start.imply(a,d.start[a])}),e.startDate=e.start.date(),!e.start.isCertain("day")&&!e.start.isCertain("month")&&e.start.isCertain("dayOfWeek")){var k=moment(e.start.date());k.day(e.start.dayOfWeek),e.start.day=k.date(),e.start.month=k.month()}if(void 0===e.start.dayOfWeek||j.indexOf("dayOfWeek")>=0){var k=moment(e.start.date());e.start.imply("dayOfWeek",k.day())}e.startDate=e.start.date()}return b}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.refiners.MissingComponentsRefiner={refine:a,order:500}}(),function(){function a(a,c){for(var d=[],e=0;e<c.length;e++)b(d,c[e]);return d}function b(a,b){for(var c=0;c<a.length&&a[c].index<b.index;)c++;if(c<a.length){for(var d=c;d<a.length&&a[d].index<b.index+b.text.length;){if(a[d].text.length>=b.text.length)return a;d++}a.splice(c,d-c)}if(c-1>=0){var e=a[c-1];if(b.index<e.index+e.text.length){if(e.text.length>=b.text.length)return a;a.splice(c-1,1),c-=1}}return a.splice(c,0,b),a}if("undefined"==typeof chrono)throw"Cannot find the chrono main module";chrono.refiners.RemoveReplicateRefiner={refine:a,order:1e3}}()}(),function(a){{var b=Backbone.View.extend({el:".splash.dropspot",input:"input.dropspot",events:{"hover .drag-over":"overlay"},settings:{url:"/upload",maxfilesize:3},initialize:function(){_.bindAll(this,"finished"),_.extend(this.settings,{uploadFinished:this.finished}),this.render()},render:function(){a(this.el).filedrop(this.settings)},finished:function(b,c,d){this.$el.css("background-image","url("+d+")"),a(this.input).val(d)}});new b}}(jQuery),function(a){{var b=Backbone.Model.extend({idAttribute:"_id",urlRoot:"/post",validate:function(){},initialize:function(){this.fetch(),this.on("invalid",this.invalid)},invalid:function(a,b){alert(b)}}),c=Backbone.View.extend({el:".spirit-bar",events:{"click a.save":"save","click a.delete":"delete","click a.publish":"publish"},initialize:function(){_.bindAll(this,"save","delete","publish","notify"),this.model.on("sync",this.notify),this.model.on("destroy",this.navigate),this.$form=a("form.post")},navigate:function(){window.location="/"},notify:function(a,b){console.log(a,b),Spirit.Notify.message("post saved")},save:function(a){a.preventDefault();var b=this.$form.serializeJSON();this.model.save(b,{wait:!0})},"delete":function(){this.model.destroy({wait:!0})},publish:function(a){a.preventDefault(),this.$form.find(".status").val("published"),this.save()}}),d=new b({_id:postdata._id});new c({model:d})}}(jQuery),function(a){Backbone.View.extend({el:".editable",template:'<textarea id="textarea-<%= id %>" name="<%= id %>" class="hidden mirror"><%= content %></textarea>',defaults:{disableHTML:!1},events:{input:"mirror"},initialize:function(){_.bindAll(this,"textarea"),this.editor=new MediumEditor(this.$el.selector),this.$el.mediumInsert({editor:this.editor,imagesUploadScript:"/upload"}),this.render()},render:function(){_.map(this.$el,this.textarea)},textarea:function(a,b){var c=_.template(this.template,{id:this.$el.get(b).id,content:this.$el.eq(b).html()});this.$el.eq(b).after(c)},mirror:function(b){var c=this.editor.serialize()[b.target.id].value;console.log(c),a("#textarea-"+b.target.id).val(c)}}),new MediumEditor("##itle")}(jQuery),function(a){{var b=Backbone.View.extend({el:".date",events:{input:"parse",blur:"date"},parse:_.debounce(function(b){var c=chrono.parseDate(b.currentTarget.innerHTML);moment(c).isValid()&&a(".timestamp").val(c)},100),date:function(){var b=a(".timestamp").val();console.log(b),this.$el.html(moment(b).format("MMMM Do YYYY, h:mm a"))},initialize:function(){this.date()}});new b}}(jQuery),window.Spirit={},Spirit.Notify={View:Backbone.View.extend({defaults:{message:"",duration:700,delay:500},el:".notification",initialize:function(a){_.bindAll(this,"animate","out","reset"),this.options=_.defaults(a||{},this.defaults),console.log(this.options),this.render()},render:function(){this.$el.html(this.options.message),this.animate()},animate:function(){this.$el.animate({bottom:0,opacity:1},this.options.duration,this.out)},out:function(){this.$el.delay(this.options.delay).animate({bottom:40,opacity:0},this.options.duration,this.reset)},reset:function(){this.$el.css({bottom:-30})}}),message:function(a){var b=_.extend({},{message:a});new this.View(b)}};